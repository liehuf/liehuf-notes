---
title: 04.Rust的控制流
date: 2025-08-19 11:00:00
permalink: /pages/Rust_04/
---

# Rust 的控制流

控制流指的是程序根据条件和循环来决定执行路径。Rust 提供了清晰的条件分支和循环语句，让代码逻辑更容易表达。

---

## if 表达式

```rust
fn main() {
    let n = 7;

    if n < 5 {
        println!("小于5");
    } else if n == 5 {
        println!("等于5");
    } else {
        println!("大于5");
    }
}
```

- `if` 后跟布尔表达式。
- 分支可以有多个，用 `else if`。
- `else` 是可选的。

在 Rust 中，`if` 是一个 **表达式**，所以可以直接赋值：

```rust
let x = if n > 0 { 1 } else { -1 };
```

## loop 循环

```rust
fn main() {
    let mut count = 0;

    loop {
        count += 1;
        if count == 3 {
            println!("跳出循环");
            break;
        }
    }
}
```

- `loop` 会无限执行，除非遇到 `break`。
- 使用 `continue` 可以跳过当前这次循环，直接进入下一轮。

循环还可以返回值：

```rust
let result = loop {
    count += 1;
    if count == 10 {
        break count * 2; // 返回 20
    }
};
```

------

## while 循环

```rust
fn main() {
    let mut n = 3;

    while n > 0 {
        println!("{n}");
        n -= 1;
    }
    println!("起飞！");
}
```

- `while` 在每轮循环前检查条件。
- 条件为 `false` 时循环终止。

------

## for 循环

```rust
fn main() {
    let arr = [10, 20, 30];

    for val in arr {
        println!("值: {val}");
    }
}
```

- `for` 能遍历数组、切片或迭代器。
- 更常见的写法是使用区间：

```rust
for i in 1..=5 {
    println!("{i}");
}
```

这里 `1..=5` 表示从 1 到 5（包含 5）。如果写作 `1..5`，则不包含 5。