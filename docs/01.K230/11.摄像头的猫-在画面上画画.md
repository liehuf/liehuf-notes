---
title: 11.æ‘„åƒå¤´çš„çŒ«-åœ¨ç”»é¢ä¸Šç”»ç”»
date: 2025-07-10 9:00:00
permalink: /pages/K230_11/
---

# æ‘„åƒå¤´çš„çŒ« - åœ¨ç”»é¢ä¸Šç”»ç”» ğŸ±ğŸ¨

## 1. æŠ“ä½ç”»é¢çš„â€œçŒ«â€ï¼Œåˆ«åªçœ‹ä¸åŠ¨æ‰‹

å›¾åƒç”»é¢æå‡ºæ¥äº†ï¼Œæ¥ä¸‹æ¥ä½ æ˜¯ä¸æ˜¯ä¹Ÿæƒ³â€œåœ¨æ‘„åƒå¤´ç”»é¢ä¸Šå†™å­—æ‰“æ¶‚é¸¦â€ï¼Ÿ  
**æ¬¢è¿æ¥åˆ°å›¾åƒç»˜åˆ¶ç¯èŠ‚**ï¼Œæœ¬ç¯‡åœ¨æ‘„åƒå¤´å®æ—¶ç”»é¢ä¸ŠåšåŠ¨æ€æ ‡æ³¨ï¼Œ  
æ¯”å¦‚å åŠ åæ ‡ã€ç”»çŸ©å½¢ã€æ˜¾ç¤ºæ–‡æœ¬ï¼Œä¸€æ­¥æ­¥å¾€å›¾åƒè¯†åˆ«/è§†è§‰åˆ†æé è¿‘ã€‚

---

## 2. ç®€åŒ–ä»£ç ï¼šä¸€è¾¹æ‹ä¸€è¾¹ç”»ğŸ–ï¸

ä»¥ä¸‹æ˜¯ç®€åŒ–ç‰ˆä»£ç ï¼Œæ”¯æŒåœ¨æ‘„åƒå¤´ç”»é¢ä¸ŠåŠ¨æ€ç»˜å›¾ï¼ˆçŸ©å½¢ + å­—ï¼‰å¹¶å®æ—¶æ˜¾ç¤ºåˆ° IDEï¼š

```python
import time
from media.sensor import Sensor, CAM_CHN_ID_0
from media.display import Display
from media.media import MediaManager

WIDTH, HEIGHT = 800, 480

sensor = Sensor(id=2)
sensor.reset()
sensor.set_framesize(width=WIDTH, height=HEIGHT, chn=CAM_CHN_ID_0)
sensor.set_pixformat(Sensor.RGB888, chn=CAM_CHN_ID_0)

Display.init(Display.VIRT, width=WIDTH, height=HEIGHT, to_ide=True)
MediaManager.init()
sensor.run()

try:
    while True:
        img = sensor.snapshot(chn=CAM_CHN_ID_0)

        # 1. ä¸­å¿ƒæ£€æµ‹æ¡†ï¼ˆæ¨¡æ‹Ÿäººè„¸æ¡†ï¼‰
        box_w, box_h = 160, 120
        box_x = (WIDTH - box_w) // 2
        box_y = (HEIGHT - box_h) // 2
        img.draw_rectangle(box_x, box_y, box_w, box_h, color=(0, 255, 0), thickness=3)

        # 2. åœ†å½¢ç„¦ç‚¹ï¼ˆåœ¨ä¸­å¿ƒç‚¹ï¼‰
        center_x, center_y = WIDTH // 2, HEIGHT // 2
        img.draw_circle(center_x, center_y, 40, color=(255, 100, 100), thickness=2)

        # 3. å¯¹è§’çº¿ï¼ˆè§†è§‰è¾…åŠ©çº¿ï¼‰
        img.draw_line(0, 0, WIDTH, HEIGHT, color=(50, 150, 255), thickness=1)
        img.draw_line(WIDTH, 0, 0, HEIGHT, color=(50, 150, 255), thickness=1)

        # 4. ä¸­å¿ƒåå­—å‡†çº¿
        img.draw_cross(center_x, center_y, color=(255, 255, 255), size=20, thickness=2)

        # 5. è¯´æ˜æ–‡å­—
        img.draw_string_advanced(10, HEIGHT - 40, 24, "æ‘„åƒå¤´ç”»é¢ Â· æ­£åœ¨ç»˜åˆ¶", color=(255, 255, 0), scale=2)

        Display.show_image(img)
        time.sleep(0.1)
except Exception as e:
    print("å¼‚å¸¸ï¼š", e)
finally:
    sensor.stop()
    Display.deinit()
    MediaManager.deinit()
    time.sleep_ms(100)
```

## 3. å‡½æ•°çŸ¥è¯†ç‚¹ç²¾åğŸ“š

| åç§°                             | ç”¨æ³•è¯´æ˜                                 |
| -------------------------------- | ---------------------------------------- |
| `sensor.snapshot()`              | æ‹ä¸‹ä¸€å¸§å›¾åƒï¼Œåç»­çš„æ‰€æœ‰ç»˜åˆ¶éƒ½åŸºäºè¿™ä¸ªå›¾ |
| `img.draw_rectangle(x, y, w, h)` | åœ¨å›¾åƒä¸Šç”»çº¢æ¡†ï¼Œå¯è‡ªå®šä¹‰å¤§å°å’Œçº¿å®½       |
| `img.draw_string(x, y, text)`    | åœ¨å›¾åƒä¸Šå†™å­—ï¼Œå¸¸ç”¨äºæ˜¾ç¤ºä¿¡æ¯æˆ–è°ƒè¯•åæ ‡   |
| `Display.show_image(img)`        | æ¯å¸§éƒ½è¦åˆ·ï¼Œä¸ç„¶ä½ çœ‹ä¸åˆ°ç”»çš„å†…å®¹         |
| `(urandom.getrandbits(10) % n)`  | ç”Ÿæˆ 0~n çš„éšæœºæ•°ï¼Œæ–¹ä¾¿éšæœºå®šä½          |



------

## 4. ä½¿ç”¨å»ºè®® ğŸ§ª

- **æ‘„åƒå¤´ + ç»˜åˆ¶ç»“åˆ** æ˜¯åç»­åšäººè„¸æ¡†ã€äººæ‰‹è·Ÿè¸ªçš„åŸºç¡€ã€‚
- å›¾åƒå¯¹è±¡ `img` æ˜¯æ¯å¸§çš„å›¾ï¼Œç»˜åˆ¶å¿…é¡»åœ¨ `.snapshot()` æ‹¿åˆ°å›¾åæ“ä½œã€‚
- å°è¯•è‡ªå·±å®šä¹‰çŸ©å½¢åŒºåŸŸã€ç»˜åˆ¶å¤šä¸ªæ–‡å­—ï¼Œä¹Ÿå¯ä»¥å›ºå®šä½ç½®è°ƒè¯•ã€‚

------

## 5. å°ç›®æ ‡ Â· å¤§è®¡åˆ’ ğŸ§ 

- âœ… æœ¬ç¯‡æŒæ¡äº†â€œç”»é¢ä¸ŠåŠ å†…å®¹â€çš„æŠ€å·§ã€‚
- ğŸ¯ ä¸‹ä¸€æ­¥ä½ å¯ä»¥ç”¨æ¨¡å‹è¯†åˆ«åˆ°çš„åæ ‡ä¿¡æ¯æ¥æ§åˆ¶ç»˜åˆ¶â€”â€”æ¯”å¦‚äººè„¸æ¡†æ¡†ã€‚
- ğŸš€ æœªæ¥æç›®æ ‡æ£€æµ‹æ—¶ï¼Œåªè¦åŠ ç‚¹åæ ‡ä¿¡æ¯ï¼Œè¿™ä¸ªæ˜¾ç¤ºé€»è¾‘ç›´æ¥å¤ç”¨ã€‚

------

## å‚è€ƒèµ„æ–™

- ğŸ¾ [å›¾åƒç»˜å›¾æ¥å£æ–‡æ¡£](https://wiki.lckfb.com/zh-hans/lushan-pi-k230/image-recog/img-draw.html)
- ğŸ“· [K230 æ‘„åƒå¤´ä½¿ç”¨è¯´æ˜](https://wiki.lckfb.com/zh-hans/lushan-pi-k230/image-recog/use-sensor.html)

------

## å…è´£å£°æ˜

æœ¬æ–‡æ¡£åŠæ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬æ–‡å­—ã€å›¾ç‰‡ã€ä»£ç ç­‰ï¼‰å‡ä¸ºä½œè€…åŸºäºå˜‰ç«‹åˆ›åºå±±æ´¾K230å¼€å‘æ¿å…¬å¼€èµ„æ–™å’Œä¸ªäººå®è·µç»éªŒæ•´ç†ï¼Œä»…ä¾›å­¦ä¹ å’ŒæŠ€æœ¯äº¤æµä½¿ç”¨ã€‚

æ¶‰åŠçš„å“ç‰Œã€å•†æ ‡ã€å›¾ç‰‡ä¸ç›¸å…³èµ„æºå‡å½’å˜‰ç«‹åˆ›å®˜æ–¹æ‰€æœ‰ï¼Œæœ¬æ–‡æ— ä»»ä½•å•†ä¸šæ„å›¾æˆ–ä»£ç†å…³ç³»ï¼Œå†…å®¹ä¸æ„æˆä»»ä½•å½¢å¼çš„å®˜æ–¹æ‰¿è¯ºæˆ–ä¿è¯ã€‚

ç”¨æˆ·åº”ç¡®ä¿åœ¨åˆæ³•åˆè§„çš„å‰æä¸‹ä½¿ç”¨ç›¸å…³èµ„æºã€‚å¦‚æœ‰ç‰ˆæƒé—®é¢˜ï¼Œè¯·è”ç³»ä½œè€…æˆ–å˜‰ç«‹åˆ›å®˜æ–¹å¤„ç†ã€‚