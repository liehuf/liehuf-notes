---
title: 02.指针高阶用法
date: 2025-10-10 14:00:00
permalink: /pages/C_02/
---

### 1. **字符指针 (`char *`)**

**定义**：字符指针用于指向字符或字符串。

- **单个字符指针**：指向字符变量。
- **字符串指针**：指向常量字符串。

**例子**：

```c
char ch = 'a';  
char *pc = &ch;           // 指向字符变量  
const char *p = "hello";  // 指向字符串常量
```

------

### 2. **指针数组**

**定义**：指针数组是一个数组，数组的每个元素都是指针。

- 用于存储多个指向相同类型数据的指针。

**例子**：

```c
int a = 10, b = 20, c = 30;
int *arr[3] = {&a, &b, &c};  // 数组，存储指向整型的指针

char *str_arr[3] = {"apple", "banana", "cherry"};  // 字符串数组
```

------

### 3. **数组指针**

**定义**：数组指针是指向整个数组的指针，而不仅是数组的首元素。

- **区别**：数组指针指向的是整个数组，而指针数组指向的是数组的各个元素。

**例子**：

```c
int arr[3] = {1, 2, 3};
int (*p)[3] = &arr;  // 数组指针，指向整个数组
```

------

### 4. **数组参数与指针参数**

**定义**：在 C 语言中，数组总是以指针的方式传递，即传递数组的首地址。指针参数直接传递指针的地址。

- **数组传参**：本质上是传递数组的首元素地址。
- **指针传参**：直接传递指针的地址。

**例子**：

```c
void func(int *arr) { printf("%d", arr[0]); }  // 数组通过指针传递
int arr[3] = {1, 2, 3};
func(arr);  // 传递数组的首地址
```

------

### 5. **函数指针**

**定义**：函数指针用于指向函数，可以实现动态调用函数的功能。

- **用途**：可以用于回调机制、动态选择不同的函数实现。

**例子**：

```c
int add(int x, int y) { return x + y; }
int (*func_ptr)(int, int) = &add;  // 定义函数指针并指向函数
func_ptr(3, 4);  // 通过函数指针调用 add 函数
```

------

### 6. **回调函数**

**定义**：回调函数是将函数的指针作为参数传递给其他函数，由被传递的函数在适当的时候调用。

- **同步回调**：立刻执行回调函数。
- **异步回调**：在未来某个时间点执行回调函数。

**例子**：

```c
void executeCallback(int (*callback)(int, int)) {
    printf("%d", callback(3, 4));  // 调用回调函数
}

int add(int x, int y) { return x + y; }
executeCallback(add);  // 执行回调
```