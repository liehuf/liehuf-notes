---
title: 08.Rust的结构体类型
date: 2025-08-22 15:00:00
permalink: /pages/Rust_08/
---

# Rust 的结构体类型：给数据贴标签让它长得像人样

Rust 里的结构体（struct）是你拿来把数据组织得更有意义的工具。它的作用就像给一堆数据贴上名字标签，当你再用的时候，根本不用记顺序，只要看名字就知道搞啥。

---

##  一、为什么要用结构体（Struct）

结构体比元组更“友好”，因为你可以给每个字段起名字，不再靠位置记是什么。比如我们有一个代表用户信息的数据组：

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}
```

这样以后你访问字段就很清楚：

```rust
let u = User { ... };
println!("{}", u.email);  // 一看就知道在搞邮箱
```

结构体就是为了让数据“有脸有名”——比元组靠谱。

## 二、如何定义与使用结构体

### 定义结构体

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}
```

你定义的是一个**模板**，跟工厂图纸一样。

### 实例化结构体

```rust
let mut user1 = User {
    email: String::from("a@ex.com"),
    username: String::from("alice"),
    active: true,
    sign_in_count: 1,
};
```

注意：

- 字段顺序可随意（不像元组必须按定义顺序填）
- 要想改字段必须让整个实例是 `mut`（Rust 不允许只给字段加 `mut`）

### 修改字段

```rust
user1.email = String::from("alice@new.com");
```

整个实例可变才行。

— 来源参考：“定义结构体”与“实例化结构体”、修改字段 都是 Rust 基础操作

------

## 三、还有其他结构体变体？元组 struct、单元 struct

Rust 还支持其他几种结构体：

### 元组结构体（Tuple Struct）

像元组但有类型名，适合只想“命名类型”而不想写字段名的情况：

```rust
struct Color(i32, i32, i32);
struct Point(i32, i32, i32);

let black = Color(0, 0, 0);
let origin = Point(0, 0, 0);
```

尽管字段类型一样，但 `Color` 和 `Point` 是不同类型，互不兼容。

### 单元结构体（Unit-like Struct）

啥都没有，就是个名字，常用于特殊场景（比如作为 trait 的实现标记）：

```rust
struct AlwaysEqual;

let x = AlwaysEqual;
```

给个名字空壳体，有啥用呢？以后你会用到。

------

## 四、结构体在真实代码里的样子：计算矩形面积

假设你要计算矩形面积，用结构体比多个变量更清晰：

```rust
struct Rectangle {
    width: u32,
    height: u32,
}

fn area(rect: &Rectangle) -> u32 {
    rect.width * rect.height
}

fn main() {
    let rect = Rectangle { width: 30, height: 50 };
    println!("面积是 {} 像素²", area(&rect));
}
```

让人看代码时瞬间明白：这是一个矩形，有宽有高，用 `area` 函数算面积。太直观。

------

## 五、结构体进阶操作：复用已有实例

如果你想在新实例里复用老实例的大部分字段，可以写：

```rust
let user2 = User {
    email: String::from("new@ex.com"),
    ..user1
};
```

这会把 `user1` 里除了 `email` 之外的字段直接搬过来。但要注意，**不会 `Copy` 的字段会被 move**， `user1` 中那些被 move 掉的字段就不能再用。