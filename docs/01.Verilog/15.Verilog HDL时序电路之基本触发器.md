---
title: 15.Verilog HDL触发器设计
date: 2025-08-13 14:20:00
permalink: /pages/Verilog_15/
---

# **触发器设计：数字电路的“记事本”**

## **1. 基本 D 触发器**

**D触发器**（Data 或 Delay Flip-Flop）是最常见的触发器。  
它会在**时钟边沿**（上升沿或下降沿）把输入 `data_in` 的值存入输出 `q`，并保持到下一个时钟触发。

### **Verilog 示例：基本 D 触发器**

```verilog
module d_ff_basic (
    input  wire clk,
    input  wire data_in,
    output reg  q
);
    always @(posedge clk) begin
        q <= data_in;  // 在时钟上升沿锁存输入
    end
endmodule

```

### **2.1 同步复位**

- **复位信号**在**时钟边沿**生效。
- 好处：复位动作和数据更新有相同时序，容易分析。
- 坏处：复位需要等待时钟边沿，速度可能不够快。

```verilog
module d_ff_sync_rst (
    input  wire clk,
    input  wire rst_n,    // 低有效复位
    input  wire data_in,
    output reg  q
);
    always @(posedge clk) begin
        if (!rst_n)
            q <= 1'b0;    // 同步复位
        else
            q <= data_in;
    end
endmodule
```

------

### **2.2 异步复位**

- **复位信号**在任何时间都能立即生效（不用等时钟）。
- 好处：可以快速清零。
- 坏处：如果复位释放时机不当，可能导致亚稳态问题。

```verilog
module d_ff_async_rst (
    input  wire clk,
    input  wire rst_n,    // 低有效复位
    input  wire data_in,
    output reg  q
);
    always @(posedge clk or negedge rst_n) begin
        if (!rst_n)
            q <= 1'b0;    // 异步复位立即生效
        else
            q <= data_in;
    end
endmodule
```

------

## **3. T 触发器**

**T触发器**（Toggle Flip-Flop）常用于**分频器**、**计数器**等电路。
 它的行为是：

- **T = 1** → 状态翻转
- **T = 0** → 保持状态

```verilog
module t_ff (
    input  wire clk,
    input  wire rst_n,     // 低有效复位
    input  wire T,
    output reg  data_out
);
    always @(posedge clk or negedge rst_n) begin
        if (!rst_n)
            data_out <= 1'b0;
        else if (T)
            data_out <= ~data_out;  // 翻转
        else
            data_out <= data_out;   // 保持
    end
endmodule
```

------

## **4. 小结**

- **D触发器**是最基础的状态存储单元。
- **同步复位**安全、易分析；**异步复位**快速，但要注意释放时机。
- **T触发器**是计数器和分频器的好帮手。

> 组合逻辑会“算”，触发器会“记”，两者结合才是完整的数字电路。
