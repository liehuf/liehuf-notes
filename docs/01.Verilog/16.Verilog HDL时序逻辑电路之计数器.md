---
title: 16.Verilog HDL计数器设计
date: 2025-08-13 14:40:00
permalink: /pages/Verilog_16/
---

# **计数器设计：数字世界的“节拍器”**

## **1. 二进制计数器**

最简单的计数器就是**二进制计数器**。  
1位二进制计数器可以用一个触发器实现——每次时钟来就翻转一次。

```verilog
module counter_1bit (
    input  wire clk,
    output reg  Q
);
    always @(posedge clk) begin
        Q <= ~Q;  // 每个时钟上升沿翻转
    end
endmodule
```

1位计数器：0 → 1 → 0 → 1 … 周期是输入时钟的两倍，也就是**分频器**的雏形。

## **2. 任意模值计数器（模 M）**

### **2.1 核心设计思路**

1. **确定触发器数量**：找到最小的 N，使得 `2^N > M`。
    例如 M=10，`2^3=8` 不够，`2^4=16` 满足，所以 N=4。
2. **计数逻辑**：每个时钟+1。
3. **反馈清零**：计到 `M-1` 时清零。

------

### **2.2 Verilog 示例**

```verilog
module counter_modM #(
    parameter M = 10  // 模值
)(
    input  wire clk,
    input  wire rst_n,   // 低有效复位
    output reg  [$clog2(M)-1:0] count
);
    always @(posedge clk or negedge rst_n) begin
        if (!rst_n)
            count <= 0;
        else if (count == M-1)
            count <= 0;         // 计满清零
        else
            count <= count + 1; // 正常计数
    end
endmodule
```

------

## **3. 小结**

- **二进制计数器**：简单，直接用触发器翻转输出，常作分频器。
- **模 M 计数器**：设计前先算出需要的触发器数量，然后用**反馈清零法**限制计数范围。
- 在工程中，计数器是时序控制的基础，比如分频、延时、状态机定时等都会用到。

> 如果说时钟是数字电路的“心跳”，那计数器就是“心跳的节拍器”。
