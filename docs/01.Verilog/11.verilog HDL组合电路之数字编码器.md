---
title: 11.verilog HDL组合电路之数字编码器
date: 2025-08-07 16:20:00
permalink: /pages/Verilog_11/
---

# **数字编码器：Encoder模块的实现**

## **1. 功能说明**

编码器的作用是：  
> **将多个输入线路中“有效”的一个信号，转换为对应的二进制编码输出。**

从硬件直觉讲，你可以把它看成“反向的多路选择器”——选择器是从输入中挑一个送出去，编码器是从多个输入中判断“哪个激活”，然后生成一个编码值。

---

## **2. 编码器的分类与实现**

编码器不止一种，常见有三类：

### **2.1 普通编码器（Basic Encoder）**

- **要求**：同一时刻只能有一个输入是有效的（即为1）
- **功能**：直接将有效输入的位置转换为二进制输出

#### ✅ 示例：**8线-3线普通编码器**

| 输入编号（IN） | 二进制输出（Y） |
| ------------- | --------------- |
| IN[0]=1       | 000             |
| IN[1]=1       | 001             |
| IN[2]=1       | 010             |
| IN[3]=1       | 011             |
| IN[4]=1       | 100             |
| IN[5]=1       | 101             |
| IN[6]=1       | 110             |
| IN[7]=1       | 111             |

#### 🔧 Verilog代码

```verilog
module encoder8to3 (
    input wire [7:0] IN,
    output reg [2:0] Y
);
    always @(*) begin
        case (IN)
            8'b0000_0001: Y = 3'b000;
            8'b0000_0010: Y = 3'b001;
            8'b0000_0100: Y = 3'b010;
            8'b0000_1000: Y = 3'b011;
            8'b0001_0000: Y = 3'b100;
            8'b0010_0000: Y = 3'b101;
            8'b0100_0000: Y = 3'b110;
            8'b1000_0000: Y = 3'b111;
            default:      Y = 3'b000; // 默认输出，防止综合报警
        endcase
    end
endmodule

```

#### 💡 注意

- 多个输入为1会导致编码冲突，因此只能有一个输入为高电平。
- 不满足时默认输出可能错误，实际应用中要加输入检查。

### **2.2 优先编码器（Priority Encoder）**

- **特点**：多个输入同时有效时，**按编号优先级高的先输出**。
- **常用于**：中断管理、抢占式调度。

#### ✅ 示例：**8线-3线优先编码器（高位优先）**

| IN[7:0]   | Y输出 |
| --------- | ----- |
| 0000_0001 | 000   |
| 0000_0011 | 001   |
| 1000_0001 | 111   |
| 0001_1111 | 100   |
| ...       | ...   |



#### 🔧 Verilog代码

```verilog
module priority_encoder8to3 (
    input wire [7:0] IN,
    output reg [2:0] Y
);
    always @(*) begin
        casex (IN)
            8'b1xxxxxxx: Y = 3'b111;
            8'b01xxxxxx: Y = 3'b110;
            8'b001xxxxx: Y = 3'b101;
            8'b0001xxxx: Y = 3'b100;
            8'b00001xxx: Y = 3'b011;
            8'b000001xx: Y = 3'b010;
            8'b0000001x: Y = 3'b001;
            8'b00000001: Y = 3'b000;
            default:     Y = 3'b000;
        endcase
    end
endmodule
```

#### 💡 casex说明：

- `casex` 允许使用 `x` 表示“无关位”，在优先编码中很方便。
- 越靠前的匹配项优先级越高，符合“优先”语义。

------

### **2.3 二进制转BCD编码器（Binary to BCD Encoder）**

- **作用**：将普通二进制数转换为BCD码（8421码或余3码等）
- **常用于**：数码管显示、七段码驱动

#### ✅ 示例：**4位二进制转8421BCD**

- 输入范围：`0000`~~`1001`（0~~9）
- 输出即为对应的4位BCD码，其实和原输入一样（只是明确为BCD）

#### 🔧 Verilog代码（例：显示0~9）

```verilog
module binary_to_bcd (
    input wire [3:0] bin,
    output reg [3:0] bcd
);
    always @(*) begin
        if (bin < 10)
            bcd = bin; // 直接映射
        else
            bcd = 4'b0000; // 超过9则清零（可自定义处理）
    end
endmodule
```

#### 💡 扩展应用

- 结合 `数码管译码器`，可用在计数器、时间显示、输入设备反馈等场景。
