---
title: 10.Verilog HDL组合电路之数据选择器
date: 2025-08-07 13:10:00
permalink: /pages/Verilog_10/
---

---
# **数据选择器：多路选择器（Multiplexer）**

## **1. 原理简介**

**功能**：从多个输入信号中，根据选择信号的值，输出其中一个。  
在数字电路中，数据选择器常用于**数据通路控制**，像个“电子开关”。

最常见的多路选择器有：

- **2选1**：两个输入、一个选择位
- **4选1**：四个输入、两个选择位

它的工作原理就是：  
> **选择线控制“哪个输入”可以通过，输出到Y端口。**

形式表达式一般如下：

**Y = I[sel]**

当然 Verilog 不支持数组直接这么写组合逻辑，我们会用 `?:`、`case` 等手段实现。

---

## **2. 示例一：2选1选择器（使用条件运算符 `?:`）**

### **结构说明**

- 输入信号：`A`, `B`
- 选择信号：`sel`（1位）
- 输出信号：`Y`

当 `sel=0`，输出为 `A`；  
当 `sel=1`，输出为 `B`。

就像：

```verilog
Y = (sel == 0) ? A : B;
```

### **完整的Verilog代码**

```verilog
module mux2to1 (
    input wire A,
    input wire B,
    input wire sel,
    output wire Y
);
    assign Y = sel ? B : A; // sel=1输出B，sel=0输出A
endmodule
```

### **说明**

- `?:` 是三目运算符，也叫条件运算符，是写组合逻辑非常常见的一种方式。
- 它简洁、直观，适合 2选1 或多个嵌套判断的场景。

## **3. 示例二：4选1选择器（使用 case 语句）**

### **结构说明**

- 输入信号：`I0, I1, I2, I3`（可以打包成一个 4 位向量）
- 选择信号：`sel[1:0]`（2位）
- 输出信号：`Y`

选择信号 `sel` 决定输出哪一路：

| sel  | Y输出 |
| ---- | ----- |
| 00   | I0    |
| 01   | I1    |
| 10   | I2    |
| 11   | I3    |



### **Verilog代码**

```verilog
module mux4to1 (
    input wire [3:0] I,       // 四个输入 I[3:0]
    input wire [1:0] sel,     // 2位选择信号
    output reg Y              // 用 reg，因为在 always 块中赋值
);
    always @(*) begin
        case (sel)
            2'b00: Y = I[0];
            2'b01: Y = I[1];
            2'b10: Y = I[2];
            2'b11: Y = I[3];
            default: Y = 1'b0; // 默认值防止综合警告
        endcase
    end
endmodule
```

### **说明**

- `case` 语句适用于选择分支比较多的场景。
- 记得给 `Y` 写默认值，避免综合时 latch 错误。
- 这种写法比条件运算符更直观清晰，适合复杂选择器。
