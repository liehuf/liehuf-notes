---
title: 01.Linux运行原理
date: 2026-02-19 23:00:00
permalink: /pages/Linux_01/
---

本博客用于解释个人在学习Linux的启动、文件、进程的总结

### 一、在不同平台上Linux的启动链路

#### x86_64 Linux 启动链

```bash
上电
↓
CPU Reset（PC 指向固件入口）
↓
UEFI / BIOS（完成 DDR、PCIe、基础硬件初始化）
↓
GRUB（加载 vmlinuz + initramfs，传递 cmdline）
↓
Linux Kernel（建立页表，初始化调度器，解析 ACPI，初始化驱动）
↓
挂载 rootfs（VFS: Mounted root）
↓
systemd / init（PID 1，建立用户空间）
↓
用户空间服务
```

**关键特征：**

- 固件已完成大部分硬件初始化
- 使用 ACPI 描述硬件
- Bootloader 通常为 GRUB
- 平台驱动型架构

#### ARM Linux 启动链

```bash
上电
↓
CPU Reset（跳转到 SoC 内部 BootROM）
↓
BootROM（选择启动介质，加载第一阶段代码）
↓
SPL（初始化 DDR 控制器和时钟）
↓
U-Boot（加载 kernel + dtb，设置 bootargs）
↓
Linux Kernel（建立页表，初始化驱动，解析 Device Tree）
↓
挂载 rootfs
↓
systemd / busybox（PID 1）
↓
用户空间
```

**关键特征：**

- BootROM 固化在 SoC 内部
- DDR 必须由 SPL 初始化
- 使用 Device Tree 描述硬件
- 芯片驱动型架构

### Linux 文件系统

#### 一、Linux 常用目录

```bash
/            （根目录，整个文件系统起点）
/bin         （基础可执行命令，系统最小运行集）  
/sbin        （系统管理命令）  
/etc         （系统配置文件）  
/home        （普通用户目录）  
/root        （root 用户主目录）  
/usr         （大部分应用程序与库文件）  
/var         （可变数据，如日志）  
/proc        （内核状态映射，虚拟文件系统）  
/dev         （设备文件接口）  
/boot        （内核与启动文件）  
/tmp         （临时文件）  
/lib /lib64  （基础共享库）
```

核心必须记住：

```bash
/bin  /etc  /home  /usr  /var  /proc  /dev
```

------

#### 二、命令的基本结构

通用形式：

```bash
command [options] [arguments]
```

例如：

```bash
ls -l /home
```

- command → 命令本体
- options → 选项（控制行为）
- arguments → 操作对象

------

#### 常用文件系统命令

```bash
pwd              （显示当前路径）
cd path          （切换目录）
ls -l            （查看文件及权限）
mkdir dir        （创建目录）
rm file          （删除文件）
cp a b           （复制文件）
mv a b           （移动/重命名文件）
cat file         （查看文件内容）
less file        （分页查看文件）
df -T            （查看文件系统类型）
lsblk -f         （查看磁盘与分区类型）
mount            （查看挂载信息）
```

------

#### 三、权限系统

Linux 权限由三组组成：

```bash
u  用户
g  组
o  其他人
```

每组包含三种权限：

```bash
r  读 (4)
w  写 (2)
x  执行 (1)
```

例如：

```bash
-rwxr-xr--bash

-      rwx     r-x     r--
↓       ↓       ↓       ↓
文件  所有者   组用户   其他人
```

结构：

```bash
[文件类型][u][g][o]
```

数值表示法：

```bash
chmod 755 file
```

解释：

```bash
7 = rwx
5 = r-x
5 = r-x
```

符号方式：

```bash
chmod u+x file
chmod g-w file
```

修改所有者：

```bash
chown user file
chown user:group file
```

------

#### 四、硬链接与软链接

文件结构本质

```bash
文件名 → inode → 数据块
```

inode 才是数据实体。

硬链接（Hard Link）

本质：

> 多个文件名指向同一个 inode

创建：

```bash
ln file1 file2
```

特点：

- 共享 inode
- 删除一个不影响数据
- 不能跨文件系统

查看 inode：

```bash
ls -li
```

软链接（Symbolic Link）

本质：

> 一个文件保存另一个文件的路径

创建：

```bash
ln -s file1 link1
```

特点：

- 类似快捷方式
- 可以跨文件系统
- 原文件删除后失效

------

#### 五、设备文件 /dev

/dev 目录包含设备文件：

```bash
/dev/sda      （硬盘）
/dev/sda1     （分区）
/dev/tty      （终端）
/dev/null     （空设备）
```

查看类型：

```bash
ls -l /dev/sda
```

开头字符说明：

```bash
b  块设备（硬盘）
c  字符设备（串口）
```

设备文件不是普通数据文件。

它们是：

> 内核驱动的接口节点

当读取设备文件时，本质是在与驱动交互。

------

#### 六、为什么 Linux “一切皆文件”

Linux 将以下对象统一抽象为文件：

- 普通数据文件
- 设备（/dev）
- 内核状态（/proc）
- 进程信息（/proc/PID）

这种设计带来统一接口：

```bash
open → read → write → close
```

无论操作硬盘、串口、进程信息，调用方式一致。

这就是 Linux 文件系统设计的核心哲学。

