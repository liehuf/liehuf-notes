---
title: FPGA 06.PLL 锁相环的认识
date: 2026-02-07 13:00:00
permalink: /pages/FPGA_06/
---

本博客用于对 **PLL（Phase Locked Loop，锁相环）** 进行基础认识，  
内容仅包括：**PLL 是什么 + PLL 的基本工作原理示意**。

---

## 一、PLL 的基本认识

PLL（锁相环）是一种**基于反馈控制的时钟系统**。

其核心思想是：

> 通过比较“输入参考信号”和“内部产生信号”的相位差，  
> 不断调整内部振荡器的频率，  
> 直到二者在频率上相同、相位保持固定差值。

当系统进入稳定状态时：

- 输出信号能够**跟踪输入信号**
- 输入与输出之间的相位关系保持稳定
- 系统称该状态为 **锁定（Locked）**

在 FPGA 中，PLL 常用于对外部输入时钟进行：
- 倍频 / 分频
- 相位调整
- 输出稳定的系统时钟

---

## 二、PLL 的基本工作原理

从原理结构上看，PLL 通常由三部分组成：

1. **相位比较器（Phase Detector）**  
   比较参考信号与反馈信号的相位差

2. **环路滤波器（Loop Filter）**  
   对相位误差信号进行平滑，避免剧烈抖动

3. **压控振荡器（VCO）**  
   根据控制信号调整输出频率

输出信号再经过分频后反馈到输入端，  
形成一个**闭环反馈系统**。

---

## 三、用于理解 PLL 原理的示意代码

需要强调的是：

> **以下代码仅用于理解 PLL 的反馈调节思想，  
> 并不是真实可用的 PLL 实现。**

真实 FPGA 中的 PLL 必须通过厂商 IP 核实现。

```verilog
module pll_model (
    input  wire ref_clk,   // 参考时钟
    input  wire rst,
    output reg  vco_clk     // 模拟振荡器输出
);

    reg [7:0] phase_error;  // 相位误差（示意）
    reg [7:0] control;      // 控制量（示意）

    // 相位比较（示意）
    always @(posedge ref_clk or posedge rst) begin
        if (rst)
            phase_error <= 0;
        else
            phase_error <= phase_error + 1;  // 假想存在相位差
    end

    // 环路调节（示意）
    always @(posedge ref_clk or posedge rst) begin
        if (rst)
            control <= 8'd100;
        else
            control <= control - phase_error;
    end

    // 振荡器模型（示意）
    always #(control) begin
        vco_clk = ~vco_clk;
    end

endmodule
```

该示意模型体现的思想是：

- 输出信号会被反馈并参与比较
- 比较结果影响振荡器行为
- 系统目标是让输出逐步“贴近”输入
