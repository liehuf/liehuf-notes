---
title: FPGA 07.FIFO、ROM、RAM理解
date: 2026-02-08 14:00:00
permalink: /pages/FPGA_07/
---

> 本文不是教学笔记，而是**给未来的自己快速回忆用的最小总结**：只保留原理直觉 + 最小可用代码。



## 一、FIFO（First In First Out）

### 1. 核心直觉

FIFO 本质是：

- **带读写指针的 RAM**
- 解决 **不同时序 / 不同速率** 的数据传递问题

你不关心内部怎么绕，**只关心四个信号**：

- `wr_en` / `rd_en`
- `full` / `empty`

### 2. 为什么一定要用 IP

- 涉及指针回绕、空满判断、跨时钟
- 手写极易出 bug

👉 **工程里 FIFO 基本只用 IP**。

### 3. 最小使用示例（同步 FIFO）

```verilog
always @(posedge clk) begin
    if (rst) begin
        wr_en <= 0;
        rd_en <= 0;
    end else begin
        if (!full)  wr_en <= 1;  // 写数据
        if (!empty) rd_en <= 1;  // 读数据
    end
end
```

> 使用层面：**把 FIFO 当成一个“有脾气的缓冲区”即可**。

------

## 二、RAM（Random Access Memory）

### 1. 核心直觉

RAM =

- **地址 → 数据** 的映射
- FPGA 里的 RAM 通常是：
  - 单口 / 双口
  - 同步读写

### 2. 两种物理来源（记住就行）

- **Distributed RAM**：LUT 拼的，小而快
- **Block RAM / DRAM**：硬件块，大而省资源

区别由工具或 IP 决定，**用的时候不用想**。

### 3. 最小 RAM 代码（同步写，同步读）

```verilog
reg [7:0] mem [0:255];

always @(posedge clk) begin
    if (we)
        mem[addr] <= din;
    dout <= mem[addr];
end
```

> 实际工程：**自己写 RAM 只用于验证或小逻辑，正式设计用 IP。**

------

## 三、ROM（Read Only Memory）

### 1. 核心直觉

ROM 就是：

- **内容固定的查表器**
- 本质仍然是 RAM，只是 **不写**

常见用途：

- 初始化参数
- 查表（LUT）
- 固定波形

### 2. ROM 的本质

- 仿真时是 case / initial
- 综合后可能进 Block RAM 或 LUT

### 3. 最小 ROM 示例（case 形式）

```verilog
always @(*) begin
    case (addr)
        8'd0: dout = 8'h11;
        8'd1: dout = 8'h22;
        8'd2: dout = 8'h33;
        default: dout = 8'h00;
    endcase
end
```

> ROM 的价值在于：**把“逻辑判断”变成“数据选择”**。

------

## 四、一句话对齐三者

- **RAM**：我随便存、随便取
- **ROM**：我只查、不改
- **FIFO**：我不看地址，只讲顺序

------

## 五、给未来自己的备注

- FIFO / RAM / ROM：**会用 IP 即等于掌握**
- 不仿真、不手写 FIFO，完全合理
- 到这一步，**初级 FPGA 已经结束**

> 后面的内容，已经不再是“会不会”，而是“值不值得优化”。