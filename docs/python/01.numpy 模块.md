---
title: 01.numpy 模块
date: 2025-09-26 22:00:00
permalink: /pages/Python_01/
---

# numpy 模块

## NumPy简介

NumPy（Numerical Python 的简称）是 Python 中用于高效数值计算的基础库。它提供了一个核心类型 `ndarray`（多维数组），并在其上封装了大量向量化运算、线性代数、统计函数、广播机制、索引切片、随机数生成等功能。它在科学计算、机器学习、信号处理等领域都非常关键。

特点包括：

- 高效：底层用 C 实现，运算速度比纯 Python 的 list 快很多
- 支持多维数组（向量、矩阵、张量）
- 广播机制（不同形状数组做运算时自动对齐维度）
- 与其他数据科学库（Pandas、SciPy、Matplotlib）兼容

---

## 📌 NumPy 常用方法（方法签名 + 参数解释）

### 数组创建

- `np.array(object, dtype=None, copy=True, ndmin=0)`
   → 从列表/元组/嵌套结构创建数组。
  - `dtype`：数据类型
  - `copy`：是否复制数据
  - `ndmin`：最小维度
- `np.zeros(shape, dtype=float)`
   → 创建全 0 数组。
- `np.ones(shape, dtype=float)`
   → 创建全 1 数组。
- `np.full(shape, fill_value, dtype=None)`
   → 创建指定值数组。
- `np.eye(N, M=None, k=0, dtype=float)`
   → 创建单位矩阵（对角线上为1）。
  - `N`：行数
  - `M`：列数（默认等于 N）
  - `k`：对角线偏移
- `np.arange([start, ]stop, step=1, dtype=None)`
   → 类似 Python range，生成等差序列。
- `np.linspace(start, stop, num=50, endpoint=True, dtype=None)`
   → 生成等间距序列。
- `np.random.rand(d0, d1, …)`
   → 生成 [0,1) 区间的均匀分布随机数。
- `np.random.randn(d0, d1, …)`
   → 生成标准正态分布随机数。

------

### 数组属性

- `arr.shape` → 返回数组形状 (tuple)。
- `arr.ndim` → 返回数组维度。
- `arr.size` → 元素总数。
- `arr.dtype` → 元素数据类型。

------

### 基本操作

- `np.reshape(arr, newshape, order='C')`
   → 改变数组形状。
- `np.transpose(arr, axes=None)` / `arr.T`
   → 转置数组。
- `np.concatenate((a1, a2, ...), axis=0)`
   → 拼接数组。
- `np.split(ary, indices_or_sections, axis=0)`
   → 拆分数组。
- `np.hstack(tup)` / `np.vstack(tup)`
   → 水平 / 垂直拼接。

------

### 索引与切片

- `arr[start:stop:step]`
   → 一维切片。
- `arr[rows, cols]`
   → 二维索引（行，列）。
- `arr[...]`
   → 使用 `...` 表示剩余所有维度。
- `arr[arr > 0]`
   → 布尔索引。

------

### 运算

- `np.add(x1, x2)` / `x1 + x2`
- `np.subtract(x1, x2)` / `x1 - x2`
- `np.multiply(x1, x2)` / `x1 * x2`
- `np.divide(x1, x2)` / `x1 / x2`
- `np.power(x1, x2)` / `x1 ** x2`
- `np.mod(x1, x2)` / `x1 % x2`

→ 向量化计算，按元素执行。

------

### 统计函数

- `np.sum(a, axis=None)` → 求和。
- `np.mean(a, axis=None)` → 均值。
- `np.median(a, axis=None)` → 中位数。
- `np.std(a, axis=None)` → 标准差。
- `np.var(a, axis=None)` → 方差。
- `np.max(a, axis=None)` / `np.min(a, axis=None)` → 最大/最小值。
- `np.argmax(a, axis=None)` / `np.argmin(a, axis=None)` → 最大/最小值索引。

------

### 线性代数

- `np.dot(a, b)`
   → 矩阵乘法 / 点积。
- `np.matmul(a, b)` / `a @ b`
   → 矩阵乘法（推荐写法）。
- `np.linalg.inv(a)`
   → 矩阵求逆。
- `np.linalg.det(a)`
   → 行列式。
- `np.linalg.eig(a)`
   → 特征值与特征向量。

------

### 文件读写

- `np.loadtxt(fname, dtype=float, delimiter=None, skiprows=0)`
   → 从文本加载数据。
- `np.savetxt(fname, X, fmt='%.18e', delimiter=' ')`
   → 保存为文本文件。
- `np.save(file, arr, allow_pickle=True)`
   → 保存为 `.npy` 文件。
- `np.load(file, allow_pickle=True)`
   → 加载 `.npy` 文件。

## 主要方法与功能示例

下面是文章中提到（或涵盖）的几个重要方法 / 功能。我给出代码 + 注释说明输出。

```python
import numpy as np
```

------

### 1. 数组的创建方式

#### 1.1 `np.array`

```python
a = np.array([1, 2, 3, 4])
print(a)  
# 输出： [1 2 3 4]

b = np.array([[1, 2, 3, 4], [4, 5, 6, 7]])
print(b)
# 输出： 
# [[1 2 3 4]
#  [4 5 6 7]]
```

#### 1.2 全零 / 全一 / 空数组

```python
z = np.zeros((3, 4))
print(z)
# 输出：
# [[0. 0. 0. 0.]
#  [0. 0. 0. 0.]
#  [0. 0. 0. 0.]]

o = np.ones((2, 5))
print(o)
# 输出：
# [[1. 1. 1. 1. 1.]
#  [1. 1. 1. 1. 1.]]

e = np.empty((2, 3))
print(e)
# 输出：内容未被初始化，可能是随机值
```

#### 1.3 `arange` 与 `linspace`

```python
r = np.arange(10, 16, 2)
print(r)
# 输出： [10 12 14]

ls = np.linspace(1, 10, 5)
print(ls)
# 输出： [ 1.     3.25   5.5    7.75  10.   ]
```

#### 1.4 随机数组

```python
rand = np.random.rand(3, 4)
print(rand)
# 输出：3×4 的浮点随机数数组，例如：
# [[0.567 0.123 ...]
#  ...]

ri = np.random.randint(2, 5, size=(4, 5))
print(ri)
# 输出：4×5 的整数数组，值在 [2,5) 区间内
```

------

### 2. 数组属性查看 / 维度操作

```python
a = np.array([1, 2, 3, 4])
print(a.ndim)      # 维度（轴数） → 输出：1
print(a.shape)     # 形状 → 输出：(4,)
print(a.size)      # 元素总数 → 输出：4
print(a.dtype)     # 元素类型 → 输出：dtype('int64') 或类似类型

# reshape 重塑形状
b = np.array([[1,2,3],[4,5,6]])
print(b.shape)     # (2,3)
c = b.reshape((3,2))
print(c.shape, c)
# 输出：
# (3, 2) [[1 2]
#        [3 4]
#        [5 6]]

# 转置
d = np.array([[1,2,3],[4,5,6],[7,8,9]])
print(d.T)
# 输出：
# [[1 4 7]
#  [2 5 8]
#  [3 6 9]]
```

------

### 3. 数组运算（元素级运算）

```python
x = np.array([1,2,3])
y = np.array([4,5,6])
print(x + y)     # 输出：[5 7 9]
print(x * y)     # 输出：[4 10 18]
```

------

### 4. 数据统计函数

```python
arr = np.array([1, 5, 6, 9])
print(np.mean(arr))     # 平均值 → 5.25
print(np.median(arr))   # 中位数 → 5.5（视具体数据而定）
print(np.std(arr))      # 标准差
print(np.var(arr))      # 方差
print(np.min(arr), np.max(arr))  # 最小值、最大值
print(np.sum(arr))      # 总和
print(np.prod(arr))     # 所有元素乘积
print(np.cumsum(arr))   # 累积和（prefix sum）
```

------

### 5. 索引与切片

```python
arr = np.array([1,2,3,4,5])
print(arr[1:4])           # 输出 [2 3 4]

m = np.array([[1,2,3],[4,5,6],[7,8,9]])
print(m[0:2, 1:3])
# 输出：
# [[2 3]
#  [5 6]]

# 多维切片示例：假设一个三维数组 data
data = np.arange(2*3*4).reshape((2,3,4))
print(data[:, :, 0:2])  # 取最后一维的前两列
```

------

### 6. 数组堆叠 / 拆分

```python
a = np.array([[1,2],[3,4]])
b = np.array([[5,6],[7,8]])
v = np.vstack((a, b))
print(v)
# 输出：
# [[1 2]
#  [3 4]
#  [5 6]
#  [7 8]]

h = np.hstack((a, b))
print(h)
# 输出：
# [[1 2 5 6]
#  [3 4 7 8]]
```

------

### 7. 保存 / 加载数组

```python
np.save('my_array.npy', a)          # 保存到 .npy 文件
loaded = np.load('my_array.npy')
print(loaded)                        # 输出：与 a 相同的数组
```
