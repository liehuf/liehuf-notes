---
title: 08.Cè¯­è¨€çš„ä½æ“ä½œ
date: 2025-10-18 11:00:00
permalink: /pages/C_08/
---

# Cè¯­è¨€ä½è¿ç®—è¯¦è§£ï¼šæŒæ¡åº•å±‚çš„åŠ›é‡

ä½è¿ç®—æ˜¯Cè¯­è¨€æœ€å…·â€œåº•å±‚å‘³â€çš„éƒ¨åˆ†ä¹‹ä¸€ã€‚
 å®ƒè®©ä½ ç›´æ¥æ“ä½œäºŒè¿›åˆ¶ä½ï¼Œä»è€Œå®ç°**é«˜æ•ˆçš„è¿ç®—ã€æ ‡å¿—æ§åˆ¶ã€å¯„å­˜å™¨ç®¡ç†ã€åŠ å¯†ä¸åè®®è§£æ**ç­‰åŠŸèƒ½ã€‚
 æ— è®ºæ˜¯æåµŒå…¥å¼ã€èŠ¯ç‰‡é©±åŠ¨ï¼Œè¿˜æ˜¯é«˜æ€§èƒ½ç®—æ³•ï¼Œä½æ“ä½œéƒ½ç»•ä¸è¿‡å»ã€‚

------

## ä¸€ã€ä»€ä¹ˆæ˜¯ä½è¿ç®—ï¼Ÿ

Cè¯­è¨€ä¸­çš„ä½è¿ç®—æ˜¯é’ˆå¯¹**æ•´æ•°ç±»å‹ï¼ˆintã€charã€shortã€longï¼‰\**æŒ‰\**äºŒè¿›åˆ¶ä½**è¿›è¡Œçš„æ“ä½œã€‚
 è¿™äº›è¿ç®—ä¸ä¼šæ”¹å˜æ•°æ®ç±»å‹ï¼Œåªæ˜¯æ”¹å˜äºŒè¿›åˆ¶çš„æ¯”ç‰¹ä½ã€‚

å¸¸è§çš„ä½è¿ç®—ç¬¦å¦‚ä¸‹ğŸ‘‡ï¼š

| è¿ç®—ç¬¦ | å«ä¹‰     | ç¤ºä¾‹     | ä½œç”¨è¯´æ˜                          |
| ------ | -------- | -------- | --------------------------------- |
| `&`    | æŒ‰ä½ä¸   | `a & b`  | ä¸¤ä½éƒ½ä¸º1æ‰ä¸º1                    |
| `|`    | æŒ‰ä½æˆ–   | æŒ‰ä½æˆ–   | ä¸¤ä½æœ‰ä¸€ä½ä¸º1å°±ä¸º1                |
| `^`    | æŒ‰ä½å¼‚æˆ– | `a ^ b`  | ç›¸åŒä¸º0ï¼Œä¸åŒä¸º1                  |
| `~`    | æŒ‰ä½å–å | `~a`     | 0å˜1ï¼Œ1å˜0                        |
| `<<`   | å·¦ç§»     | `a << n` | æ‰€æœ‰ä½å·¦ç§»nä½ï¼Œå³è¾¹è¡¥0            |
| `>>`   | å³ç§»     | `a >> n` | æ‰€æœ‰ä½å³ç§»nä½ï¼ˆç¬¦å·ä½è§†æƒ…å†µä¿æŒï¼‰ |

------

## äºŒã€æŒ‰ä½è¿ç®—çš„åŸºæœ¬ç¤ºä¾‹

```c
#include <stdio.h>

int main() {
    unsigned char a = 0b10101010; // 170
    unsigned char b = 0b11001100; // 204

    printf("a & b = 0x%X\n", a & b); // æŒ‰ä½ä¸
    printf("a | b = 0x%X\n", a | b); // æŒ‰ä½æˆ–
    printf("a ^ b = 0x%X\n", a ^ b); // æŒ‰ä½å¼‚æˆ–
    printf("~a = 0x%X\n", ~a);       // å–å
    printf("a << 1 = 0x%X\n", a << 1);
    printf("b >> 2 = 0x%X\n", b >> 2);

    return 0;
}
```

ğŸ§© è¾“å‡ºç¤ºä¾‹ï¼š

```
a & b = 0xA8
a | b = 0xEE
a ^ b = 0x46
~a = 0x55
a << 1 = 0x54
b >> 2 = 0x33
```

------

## ä¸‰ã€ä½è¿ç®—çš„å¸¸è§ç”¨é€”

### ğŸ”¹1. æ ‡å¿—ä½æ§åˆ¶ï¼ˆFlagsï¼‰

åœ¨åµŒå…¥å¼å¼€å‘ä¸­ï¼Œå¸¸ç”¨**ä¸€ä¸ªå­—èŠ‚æˆ–æ•´å‹å˜é‡**çš„å„ä¸ªbitè¡¨ç¤ºä¸åŒçš„å¼€å…³çŠ¶æ€ã€‚

```c
#define FLAG_READ  0x01  // 0000 0001
#define FLAG_WRITE 0x02  // 0000 0010
#define FLAG_EXEC  0x04  // 0000 0100

unsigned char flag = 0;

// è®¾ç½®æ ‡å¿—
flag |= FLAG_READ;   // å¼€å¯READ
flag |= FLAG_WRITE;  // å¼€å¯WRITE

// æ£€æŸ¥æ ‡å¿—
if (flag & FLAG_READ) {
    printf("Read enabled\n");
}

// æ¸…é™¤æ ‡å¿—
flag &= ~FLAG_WRITE; // å…³é—­WRITE
```

> ğŸ’¡æŠ€å·§ï¼š
>  ç”¨ `|` è®¾ç½®ï¼Œç”¨ `&~` æ¸…é™¤ï¼Œç”¨ `&` æ£€æŸ¥ï¼Œç”¨ `^` åˆ‡æ¢ã€‚

------

### ğŸ”¹2. é«˜ä½å­—èŠ‚åˆ†ç¦»ä¸åˆå¹¶

ä½è¿ç®—æ˜¯æ‹†åˆ†æ•°æ®æœ€ç›´æ¥çš„æ–¹å¼ã€‚

```c
unsigned short data = 0x1234;

unsigned char high = (data >> 8) & 0xFF;
unsigned char low  = data & 0xFF;

printf("é«˜å­—èŠ‚: 0x%X, ä½å­—èŠ‚: 0x%X\n", high, low);

// åˆå¹¶
unsigned short combine = ((unsigned short)high << 8) | low;
printf("åˆå¹¶ç»“æœ: 0x%X\n", combine);
```

------

### ğŸ”¹3. æå–æˆ–ä¿®æ”¹æŸä¸€ä½

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½æ©ç ï¼ˆmaskï¼‰æ¥æ“ä½œå•ä¸ªä½ã€‚

```c
unsigned char x = 0b10110010;

// å–ç¬¬3ä½ï¼ˆä»0å¼€å§‹ï¼‰
int bit3 = (x >> 3) & 1;  // ç»“æœï¼š0

// è®¾ç½®ç¬¬2ä½ä¸º1
x |= (1 << 2);

// æ¸…é™¤ç¬¬7ä½
x &= ~(1 << 7);

// ç¿»è½¬ç¬¬0ä½
x ^= 1 << 0;

printf("x = 0b");
for (int i = 7; i >= 0; i--)
    printf("%d", (x >> i) & 1);
printf("\n");
```

------

### ğŸ”¹4. é«˜çº§ç”¨æ³•ï¼šå¯„å­˜å™¨ä¸åè®®è§£æ

åœ¨ç¡¬ä»¶å¯„å­˜å™¨æ˜ å°„ä¸­ï¼Œä½è¿ç®—æ˜¯åŸºç¡€æ“ä½œï¼š

```c
typedef union {
    struct {
        unsigned char BIT0 : 1;
        unsigned char BIT1 : 1;
        unsigned char MODE : 2;
        unsigned char ENABLE : 1;
        unsigned char RESERVED : 3;
    } bits;
    unsigned char reg;
} ControlReg;

int main() {
    ControlReg ctrl = {0};
    ctrl.bits.ENABLE = 1;
    ctrl.bits.MODE = 2;

    printf("å¯„å­˜å™¨å€¼ = 0x%02X\n", ctrl.reg);
    return 0;
}
```

è¾“å‡ºï¼š

```c
å¯„å­˜å™¨å€¼ = 0x14
```

è¿™ç§å†™æ³•åœ¨STM32ã€FPGAå¤–å›´é©±åŠ¨ç­‰é¢†åŸŸæå…¶å¸¸è§ã€‚
 ç»“æ„ä½“é…åˆä½è¿ç®—å¯ä»¥åŒæ—¶å…¼é¡¾**ä»£ç å¯è¯»æ€§ä¸ç¡¬ä»¶ç²¾åº¦æ§åˆ¶**ã€‚
