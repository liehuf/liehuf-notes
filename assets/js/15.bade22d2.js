(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{369:function(s,t,a){"use strict";a.r(t);var n=a(16),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"k230-uart通信-发送和接收"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#k230-uart通信-发送和接收"}},[s._v("#")]),s._v(" K230 UART通信：发送和接收")]),s._v(" "),t("h2",{attrs:{id:"_1-uart简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-uart简介"}},[s._v("#")]),s._v(" 1. UART简介")]),s._v(" "),t("p",[s._v("UART（Universal Asynchronous Receiver-Transmitter，通用异步收发传输器）是一种常用的串行通信协议。在嵌入式系统中，UART被广泛应用于微控制器、传感器和调试接口等场景。")]),s._v(" "),t("p",[s._v("UART通信的主要特点：")]),s._v(" "),t("ul",[t("li",[s._v("异步通信：不需要时钟信号同步")]),s._v(" "),t("li",[s._v("使用两条线进行数据传输：\n"),t("ul",[t("li",[s._v("TXD（Transmit Data）：数据发送端")]),s._v(" "),t("li",[s._v("RXD（Receive Data）：数据接收端")])])])]),s._v(" "),t("h2",{attrs:{id:"_2-uart通信参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-uart通信参数"}},[s._v("#")]),s._v(" 2. UART通信参数")]),s._v(" "),t("h3",{attrs:{id:"_2-1-基本参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-基本参数"}},[s._v("#")]),s._v(" 2.1 基本参数")]),s._v(" "),t("ul",[t("li",[s._v("波特率：通信速度，常用值包括115200、9600等")]),s._v(" "),t("li",[s._v("数据位：通常为8位")]),s._v(" "),t("li",[s._v("停止位：通常为1位")]),s._v(" "),t("li",[s._v("校验位：可选（无校验、奇校验、偶校验）")])]),s._v(" "),t("h3",{attrs:{id:"_2-2-k230-uart配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-k230-uart配置"}},[s._v("#")]),s._v(" 2.2 K230 UART配置")]),s._v(" "),t("p",[s._v("K230支持多个UART接口，每个接口都可以独立配置。配置步骤：")]),s._v(" "),t("ol",[t("li",[s._v("引脚复用配置")]),s._v(" "),t("li",[s._v("UART参数初始化")]),s._v(" "),t("li",[s._v("数据收发操作")])]),s._v(" "),t("h2",{attrs:{id:"_3-代码示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-代码示例"}},[s._v("#")]),s._v(" 3. 代码示例")]),s._v(" "),t("h3",{attrs:{id:"_3-1-基本配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-基本配置"}},[s._v("#")]),s._v(" 3.1 基本配置")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" machine "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" UART\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" machine "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" FPIOA\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置引脚")]),s._v("\nfpioa "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" FPIOA"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nfpioa"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("set_function"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" FPIOA"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("UART2_TXD"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置GPIO11为UART2_TXD")]),s._v("\nfpioa"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("set_function"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" FPIOA"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("UART2_RXD"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置GPIO12为UART2_RXD")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化UART2")]),s._v("\nuart "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" UART"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UART"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("UART2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n            baudrate"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("115200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 波特率")]),s._v("\n            bits"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("UART"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("EIGHTBITS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据位")]),s._v("\n            parity"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("UART"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PARITY_NONE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 校验位")]),s._v("\n            stop"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("UART"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("STOPBITS_ONE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止位")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h3",{attrs:{id:"_3-2-数据发送"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-数据发送"}},[s._v("#")]),s._v(" 3.2 数据发送")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送字符串")]),s._v("\nuart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("write"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello, UART!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送字节数据")]),s._v("\nuart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("write"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("b'\\x01\\x02\\x03'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"_3-3-数据接收"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-数据接收"}},[s._v("#")]),s._v(" 3.3 数据接收")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 读取数据")]),s._v("\ndata "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" uart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Received:"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_3-4-回环测试示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-回环测试示例"}},[s._v("#")]),s._v(" 3.4 回环测试示例")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" time\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送测试数据")]),s._v("\ntest_message "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("b'UART Loopback Test!'")]),s._v("\nuart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("write"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test_message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等待数据发送完成")]),s._v("\ntime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 读取接收到的数据")]),s._v("\nreceived_data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" uart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" received_data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" received_data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" test_message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"回环测试成功！"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"回环测试失败：数据不匹配"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"回环测试失败：未接收到数据"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h2",{attrs:{id:"_4-注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-注意事项"}},[s._v("#")]),s._v(" 4. 注意事项")]),s._v(" "),t("ol",[t("li",[s._v("确保正确配置引脚复用功能")]),s._v(" "),t("li",[s._v("通信双方使用相同的波特率和其他参数")]),s._v(" "),t("li",[s._v("注意数据发送和接收的时序")]),s._v(" "),t("li",[s._v("合理使用延时确保数据完整性")]),s._v(" "),t("li",[s._v("使用完毕后及时释放UART资源")])]),s._v(" "),t("h2",{attrs:{id:"_5-常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-常见问题"}},[s._v("#")]),s._v(" 5. 常见问题")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("数据接收不完整")]),s._v(" "),t("ul",[t("li",[s._v("检查波特率设置")]),s._v(" "),t("li",[s._v("增加接收缓冲区大小")]),s._v(" "),t("li",[s._v("适当增加延时时间")])])]),s._v(" "),t("li",[t("p",[s._v("通信不稳定")]),s._v(" "),t("ul",[t("li",[s._v("检查硬件连接")]),s._v(" "),t("li",[s._v("确认电平匹配")]),s._v(" "),t("li",[s._v("检查电源稳定性")])])])]),s._v(" "),t("h2",{attrs:{id:"_6-参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-参考资料"}},[s._v("#")]),s._v(" 6. 参考资料")]),s._v(" "),t("ol",[t("li",[s._v("K230官方文档")]),s._v(" "),t("li",[s._v("UART通信协议规范")]),s._v(" "),t("li",[s._v("MicroPython UART模块文档")])])])}),[],!1,null,null,null);t.default=r.exports}}]);