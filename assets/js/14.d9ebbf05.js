(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{370:function(t,s,a){"use strict";a.r(s);var n=a(16),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"我用定时器定时画个圈圈祝福你"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我用定时器定时画个圈圈祝福你"}},[t._v("#")]),t._v(" 我用定时器定时画个圈圈祝福你")]),t._v(" "),s("h2",{attrs:{id:"_1-这玩意儿能干嘛"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-这玩意儿能干嘛"}},[t._v("#")]),t._v(" 1. 这玩意儿能干嘛？")]),t._v(" "),s("p",[t._v("定时器（Timer）听起来很朴素，但在嵌入式系统中，它可是掌管“时间的守门员”：从精准延时、定时任务，到编码器测速、PWM波控制，它都插一脚。")]),t._v(" "),s("p",[t._v("在K230中，每个定时器都支持 "),s("strong",[t._v("时基模式")]),t._v(" 和 "),s("strong",[t._v("编码器模式")]),t._v("，支持 "),s("strong",[t._v("中断回调函数")]),t._v("，用起来很有 STM32 的味道，但比裸写寄存器要友善不少。")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_2-quick-look-初始化一个定时器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-quick-look-初始化一个定时器"}},[t._v("#")]),t._v(" 2. Quick Look：初始化一个定时器")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" machine "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Timer\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初始化定时器1，每隔1000ms触发一次回调")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("my_callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"时间到了，开始画圈圈"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntim1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" period"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MODE_PERIODIC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("my_callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h3",{attrs:{id:"💡关键词解读"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#💡关键词解读"}},[t._v("#")]),t._v(" 💡关键词解读：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("1")])]),t._v(" "),s("td",[t._v("定时器编号（K230 支持多个定时器）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("period")])]),t._v(" "),s("td",[t._v("周期，单位是毫秒")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("mode")])]),t._v(" "),s("td",[t._v("支持单次（ONE_SHOT）或循环（PERIODIC）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("callback")])]),t._v(" "),s("td",[t._v("定时时间到时调用的函数")])])])]),t._v(" "),s("h2",{attrs:{id:"_3-想停就停-停止定时器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-想停就停-停止定时器"}},[t._v("#")]),t._v(" 3. 想停就停：停止定时器")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("tim1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deinit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止定时器")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"🧹小贴士"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🧹小贴士"}},[t._v("#")]),t._v(" 🧹小贴士：")]),t._v(" "),s("ul",[s("li",[t._v("用完记得 "),s("code",[t._v(".deinit()")]),t._v("，否则它会一直在那里默默打圈圈……")]),t._v(" "),s("li",[t._v("如果你的回调函数里有长时间阻塞，可能会影响下一次触发，建议用轻量级任务。")])]),t._v(" "),s("h2",{attrs:{id:"_4-想玩花活-定时器还能干这些事"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-想玩花活-定时器还能干这些事"}},[t._v("#")]),t._v(" 4. 想玩花活？定时器还能干这些事：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("应用场景")]),t._v(" "),s("th",[t._v("示例")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("定时打印")]),t._v(" "),s("td",[t._v("每秒输出一次信息")])]),t._v(" "),s("tr",[s("td",[t._v("自动切换状态")]),t._v(" "),s("td",[t._v("计时完成后改变LED状态或蜂鸣器响")])]),t._v(" "),s("tr",[s("td",[t._v("周期性采样")]),t._v(" "),s("td",[t._v("ADC数据周期采集")])]),t._v(" "),s("tr",[s("td",[t._v("软件定时器")]),t._v(" "),s("td",[t._v("替代 "),s("code",[t._v("time.sleep()")]),t._v(" 实现非阻塞延时")])])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_5-高阶玩法-多个定时器一起转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-高阶玩法-多个定时器一起转"}},[t._v("#")]),t._v(" 5. 高阶玩法：多个定时器一起转")]),t._v(" "),s("p",[t._v("你可以初始化多个 Timer，比如 Timer(0)、Timer(1)、Timer(2)……各自有自己的频率和回调，互不干扰。")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" machine "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Timer\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("world")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"World"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nTimer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MODE_PERIODIC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nTimer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MODE_PERIODIC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" world"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[s("strong",[t._v("输出效果（每0.5秒与1秒交替）：")])]),t._v(" "),s("div",{staticClass:"language-python-repl line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Hello\nWorld\nHello\nHello\nWorld\n...\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("hr"),t._v(" "),s("h2",{attrs:{id:"_6-小坑快避开"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-小坑快避开"}},[t._v("#")]),t._v(" 6. 小坑快避开")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("回调函数不要太重")]),t._v("，避免阻塞。")]),t._v(" "),s("li",[s("strong",[t._v("定时器编号别冲突")]),t._v("，否则初始化会失败。")]),t._v(" "),s("li",[s("strong",[t._v("定时器不会自动释放资源")]),t._v("，要手动 "),s("code",[t._v(".deinit()")]),t._v("。")]),t._v(" "),s("li",[t._v("某些板子的 GPIO 和 Timer 有映射限制，建议查查原理图或官方文档。")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_7-总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-总结"}},[t._v("#")]),t._v(" 7. 总结")]),t._v(" "),s("p",[t._v("K230的定时器模块在 MicroPython 下使用体验丝滑、写法简洁，非常适合快速实现各种定时任务。无论你是要写个心跳灯，还是轮询采样，只要定时器到位，项目的节奏就能踩得稳稳当当。")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_8-参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-参考资料"}},[t._v("#")]),t._v(" 8. 参考资料")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://wiki.lckfb.com/zh-hans/lushan-pi-k230/basic/timer.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("K230 Timer 官方文档"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("MicroPython Timer API 文档")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"免责声明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#免责声明"}},[t._v("#")]),t._v(" 免责声明")]),t._v(" "),s("p",[t._v("本文档及所有内容（包括文字、图片、代码等）均为作者基于嘉立创庐山派K230开发板公开资料和个人使用经验整理分享，仅供学习和技术交流之用。")]),t._v(" "),s("p",[t._v("所有涉及的品牌名称、商标、图片及相关资源均归嘉立创官方所有，未经授权不得用于商业宣传或其他用途。")]),t._v(" "),s("p",[t._v("作者与嘉立创官方无任何隶属或代理关系，内容不构成任何形式的官方承诺或保证。")]),t._v(" "),s("p",[t._v("用户在使用相关资源时，应遵守相应的开源协议和法律法规，确保合法合规。")]),t._v(" "),s("p",[t._v("如涉及版权问题，请联系作者或嘉立创官方处理。")])])}),[],!1,null,null,null);s.default=r.exports}}]);