(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{375:function(s,a,t){"use strict";t.r(a);var n=t(16),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"🚀-在-windows-上为-stm32f103c8t6-安装-rust-工具链-2025-最新版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🚀-在-windows-上为-stm32f103c8t6-安装-rust-工具链-2025-最新版"}},[s._v("#")]),s._v(" 🚀 在 Windows 上为 STM32F103C8T6 安装 Rust 工具链（2025 最新版）")]),s._v(" "),a("p",[s._v("Rust 想玩嵌入式？那必须得上 ARM Cortex-M 系列板子——经典中的经典，**STM32F103C8T6（俗称“蓝丁板”）**就是入坑的首选。本篇文章手把手教你如何在 Windows 上为它配置 Rust 工具链，让你的 "),a("code",[s._v("main.rs")]),s._v(" 比裸机 C 还干净利落。")]),s._v(" "),a("h2",{attrs:{id:"🧱-前提准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🧱-前提准备"}},[s._v("#")]),s._v(" 🧱 前提准备")]),s._v(" "),a("p",[s._v("确保你已经安装好：")]),s._v(" "),a("ul",[a("li",[s._v("Rust 官方工具链（用 rustup 安装，默认即可）")]),s._v(" "),a("li",[s._v("VSCode + rust-analyzer（可选但推荐）")]),s._v(" "),a("li",[s._v("ST-Link 调试器（烧录用）")])]),s._v(" "),a("p",[s._v("命令行确认 Rust 安装成功：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rustc "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cargo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"🛠️-第一步-添加目标架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🛠️-第一步-添加目标架构"}},[s._v("#")]),s._v(" 🛠️ 第一步：添加目标架构")]),s._v(" "),a("p",[s._v("STM32F103 属于 Cortex-M3 内核，用的是 "),a("code",[s._v("thumbv7m-none-eabi")]),s._v(" 架构。")]),s._v(" "),a("p",[s._v("执行命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rustup target "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" thumbv7m-none-eabi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"🔧-第二步-安装交叉编译工具链-gcc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🔧-第二步-安装交叉编译工具链-gcc"}},[s._v("#")]),s._v(" 🔧 第二步：安装交叉编译工具链（GCC）")]),s._v(" "),a("p",[s._v("Rust 编译器本身不带 linker，需要 ARM 的裸机工具链。")]),s._v(" "),a("p",[s._v("你可以安装：")]),s._v(" "),a("h3",{attrs:{id:"方法1-xpack-arm-toolchain-推荐"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法1-xpack-arm-toolchain-推荐"}},[s._v("#")]),s._v(" 方法1：xPack Arm Toolchain（推荐）")]),s._v(" "),a("p",[s._v("访问：")]),s._v(" "),a("blockquote",[a("p",[s._v("https://xpack.github.io/arm-none-eabi-gcc/install/")])]),s._v(" "),a("p",[s._v("下载 Windows 版，安装后将其 "),a("code",[s._v("bin")]),s._v(" 目录添加到系统环境变量 "),a("code",[s._v("PATH")]),s._v("。")]),s._v(" "),a("p",[s._v("比如：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("xpack-arm-none-eabi-gcc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("验证是否安装成功：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("arm-none-eabi-gcc "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"🔌-第三步-安装-probe-rs-和-cargo-flash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🔌-第三步-安装-probe-rs-和-cargo-flash"}},[s._v("#")]),s._v(" 🔌 第三步：安装 probe-rs 和 cargo-flash")]),s._v(" "),a("p",[s._v("用于"),a("strong",[s._v("读取芯片信息、烧录程序、调试")]),s._v("等功能。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cargo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" cargo-binutils\nrustup component "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" llvm-tools-preview\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cargo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" probe-rs\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cargo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" cargo-flash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"🔍-第四步-确认调试器是否连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🔍-第四步-确认调试器是否连接"}},[s._v("#")]),s._v(" 🔍 第四步：确认调试器是否连接")]),s._v(" "),a("p",[s._v("插好 ST-Link，使用：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cargo")]),s._v(" flash --list-probes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("能看到设备信息就说明你的调试器连接正常。")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"📦-第五步-可选-创建一个测试项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#📦-第五步-可选-创建一个测试项目"}},[s._v("#")]),s._v(" 📦 第五步（可选）：创建一个测试项目")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cargo")]),s._v(" new f103-blink "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--bin")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" f103-blink\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("然后创建 "),a("code",[s._v(".cargo/config.toml")]),s._v("，指定目标架构：")]),s._v(" "),a("div",{staticClass:"language-toml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("target")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"thumbv7m-none-eabi"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("编辑 "),a("code",[s._v("Cargo.toml")]),s._v(" 添加依赖：")]),s._v(" "),a("div",{staticClass:"language-toml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("dependencies")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("cortex-m")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.7"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("cortex-m-rt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.7"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("panic-halt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.2"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("stm32f1xx-hal")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.10"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("编写最小化裸机代码（"),a("code",[s._v("src/main.rs")]),s._v("）：")]),s._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[s._v("#![no_std]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[s._v("#![no_main]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("cortex_m_rt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),s._v("entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" panic_halt "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[s._v("#[entry]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("->")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("loop")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 你的裸机逻辑写这")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("构建项目：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cargo")]),s._v(" build "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--release")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("烧录进 STM32F103：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cargo")]),s._v(" flash "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--chip")]),s._v(" STM32F103C8 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--release")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"🧼-整体流程总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🧼-整体流程总结"}},[s._v("#")]),s._v(" 🧼 整体流程总结")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("步骤")]),s._v(" "),a("th",[s._v("命令")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("添加目标")]),s._v(" "),a("td",[a("code",[s._v("rustup target add thumbv7m-none-eabi")])])]),s._v(" "),a("tr",[a("td",[s._v("安装 linker")]),s._v(" "),a("td",[s._v("安装 "),a("code",[s._v("arm-none-eabi-gcc")]),s._v(" 并配置环境变量")])]),s._v(" "),a("tr",[a("td",[s._v("安装烧录工具")]),s._v(" "),a("td",[a("code",[s._v("cargo install cargo-flash")]),s._v(" 等")])]),s._v(" "),a("tr",[a("td",[s._v("创建项目")]),s._v(" "),a("td",[a("code",[s._v("cargo new your_proj --bin")])])]),s._v(" "),a("tr",[a("td",[s._v("构建项目")]),s._v(" "),a("td",[a("code",[s._v("cargo build --release")])])]),s._v(" "),a("tr",[a("td",[s._v("烧录到板子")]),s._v(" "),a("td",[a("code",[s._v("cargo flash --chip STM32F103C8")])])])])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"🧠-一些补充建议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🧠-一些补充建议"}},[s._v("#")]),s._v(" 🧠 一些补充建议")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("stm32f1xx-hal")]),s._v(" 是官方 HAL，非常成熟")]),s._v(" "),a("li",[s._v("使用 "),a("code",[s._v("probe-rs")]),s._v(" 可以实现 RTT、调试打印等高级功能")]),s._v(" "),a("li",[s._v("如果你熟悉 "),a("code",[s._v("openocd")]),s._v(" 或 "),a("code",[s._v("stlink")]),s._v("，也可以用传统方式烧录 "),a("code",[s._v(".bin")])])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"💬-结语"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#💬-结语"}},[s._v("#")]),s._v(" 💬 结语")]),s._v(" "),a("p",[s._v("Rust 玩嵌入式已经不再是实验室里的黑魔法，现在你完全可以把 STM32F1 搞成自己的 playground，写出既优雅又安全的裸机逻辑。比 C 更硬核，比 Python 更专业，这才是现代工程师该有的姿势。")])])}),[],!1,null,null,null);a.default=e.exports}}]);