(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{386:function(s,t,a){"use strict";a.r(t);var n=a(9),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"有限状态机-fsm-数字电路的-大脑"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有限状态机-fsm-数字电路的-大脑"}},[s._v("#")]),s._v(" "),t("strong",[s._v("有限状态机（FSM）：数字电路的“大脑”")])]),s._v(" "),t("h2",{attrs:{id:"_1-fsm-类型对比"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-fsm-类型对比"}},[s._v("#")]),s._v(" "),t("strong",[s._v("1. FSM 类型对比")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("类型")]),s._v(" "),t("th",[s._v("输出依赖")]),s._v(" "),t("th",[s._v("特点")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("strong",[s._v("Moore机")])]),s._v(" "),t("td",[s._v("仅当前状态")]),s._v(" "),t("td",[s._v("输出稳定，无延迟毛刺")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("Mealy机")])]),s._v(" "),t("td",[s._v("当前状态 + 当前输入")]),s._v(" "),t("td",[s._v("响应快，但可能带毛刺（输出跳变）")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("Moore机输出只看状态，Mealy机输出对输入敏感，速度快但要注意毛刺问题。")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"_2-状态编码方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-状态编码方式"}},[s._v("#")]),s._v(" "),t("strong",[s._v("2. 状态编码方式")])]),s._v(" "),t("p",[s._v("选择合适的状态编码对面积、速度、设计复杂度影响大：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("编码方式")]),s._v(" "),t("th",[s._v("触发器数量")]),s._v(" "),t("th",[s._v("优势")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("strong",[s._v("二进制")])]),s._v(" "),t("td",[t("code",[s._v("log2(N)")])]),s._v(" "),t("td",[s._v("占用面积小，资源节约")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("独热码")])]),s._v(" "),t("td",[t("code",[s._v("N")])]),s._v(" "),t("td",[s._v("速度快，组合逻辑简单")])]),s._v(" "),t("tr",[t("td",[t("strong",[s._v("格雷码")])]),s._v(" "),t("td",[t("code",[s._v("log2(N)")])]),s._v(" "),t("td",[s._v("状态切换无毛刺")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("独热码用触发器多，但状态跳变只改变一位，适合高速设计。"),t("br"),s._v("\n格雷码的状态切换避免多位同时跳变，减少毛刺。")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"_3-三段式设计模板"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-三段式设计模板"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3. 三段式设计模板")])]),s._v(" "),t("p",[s._v("设计FSM通常分成三步：")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("状态寄存器")]),s._v("：用时钟更新当前状态。")]),s._v(" "),t("li",[t("strong",[s._v("下一状态逻辑")]),s._v("：组合逻辑，根据当前状态和输入计算下一状态。")]),s._v(" "),t("li",[t("strong",[s._v("输出逻辑")]),s._v("：根据当前状态（Moore）或状态+输入（Mealy）产生输出。")])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"verilog-典型模板示例-moore机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verilog-典型模板示例-moore机"}},[s._v("#")]),s._v(" "),t("strong",[s._v("Verilog 典型模板示例（Moore机）")])]),s._v(" "),t("div",{staticClass:"language-verilog line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-verilog"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v(" fsm_example "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("input")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("wire")]),s._v(" clk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("input")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("wire")]),s._v(" rst_n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("input")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("wire")]),s._v(" in"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("output")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("reg")]),s._v("  out\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 状态定义（可用枚举）")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typedef")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enum")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("logic")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("{")]),s._v("\n        S0 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2'b00")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        S1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2'b01")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        S2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2'b10")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("}")]),s._v(" state_t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    state_t current_state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next_state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 状态寄存器更新")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("always @")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("posedge")]),s._v(" clk "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("or")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("negedge")]),s._v(" rst_n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("rst_n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            current_state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" S0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n            current_state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" next_state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 下一状态逻辑")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("always @")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("current_state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            S0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" next_state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" in "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" S1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" S0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            S1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" next_state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" in "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" S2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" S0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            S2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" next_state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" S0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" next_state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" S0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("endcase")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 输出逻辑（Moore机，输出只和状态相关）")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("always @")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n        out "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1'b0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("current_state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" S2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            out "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1'b1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("endmodule")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br")])]),t("h2",{attrs:{id:"_4-小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-小结"}},[s._v("#")]),s._v(" "),t("strong",[s._v("4. 小结")])]),s._v(" "),t("ul",[t("li",[s._v("FSM 是数字电路的核心“大脑”，负责状态管理和控制流程。")]),s._v(" "),t("li",[s._v("Moore机输出稳定、设计简单；Mealy机响应快，但要注意毛刺。")]),s._v(" "),t("li",[s._v("状态编码选择直接影响设计效率和性能。")]),s._v(" "),t("li",[s._v("三段式设计模板是业界常用的高效设计模式。")])]),s._v(" "),t("blockquote",[t("p",[s._v("设计FSM就像搭积木：状态寄存器是基础，下一状态是桥梁，输出逻辑是点睛。")])])])}),[],!1,null,null,null);t.default=r.exports}}]);