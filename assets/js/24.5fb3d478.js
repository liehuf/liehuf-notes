(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{384:function(s,t,a){"use strict";a.r(t);var n=a(9),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"计数器设计-数字世界的-节拍器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#计数器设计-数字世界的-节拍器"}},[s._v("#")]),s._v(" "),t("strong",[s._v("计数器设计：数字世界的“节拍器”")])]),s._v(" "),t("h2",{attrs:{id:"_1-二进制计数器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-二进制计数器"}},[s._v("#")]),s._v(" "),t("strong",[s._v("1. 二进制计数器")])]),s._v(" "),t("p",[s._v("最简单的计数器就是"),t("strong",[s._v("二进制计数器")]),s._v("。"),t("br"),s._v("\n1位二进制计数器可以用一个触发器实现——每次时钟来就翻转一次。")]),s._v(" "),t("div",{staticClass:"language-verilog line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-verilog"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v(" counter_1bit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("input")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("wire")]),s._v(" clk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("output")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("reg")]),s._v("  Q\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("always @")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("posedge")]),s._v(" clk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n        Q "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v("Q"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 每个时钟上升沿翻转")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("endmodule")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("1位计数器：0 → 1 → 0 → 1 … 周期是输入时钟的两倍，也就是"),t("strong",[s._v("分频器")]),s._v("的雏形。")]),s._v(" "),t("h2",{attrs:{id:"_2-任意模值计数器-模-m"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-任意模值计数器-模-m"}},[s._v("#")]),s._v(" "),t("strong",[s._v("2. 任意模值计数器（模 M）")])]),s._v(" "),t("h3",{attrs:{id:"_2-1-核心设计思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-核心设计思路"}},[s._v("#")]),s._v(" "),t("strong",[s._v("2.1 核心设计思路")])]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("确定触发器数量")]),s._v("：找到最小的 N，使得 "),t("code",[s._v("2^N > M")]),s._v("。\n例如 M=10，"),t("code",[s._v("2^3=8")]),s._v(" 不够，"),t("code",[s._v("2^4=16")]),s._v(" 满足，所以 N=4。")]),s._v(" "),t("li",[t("strong",[s._v("计数逻辑")]),s._v("：每个时钟+1。")]),s._v(" "),t("li",[t("strong",[s._v("反馈清零")]),s._v("：计到 "),t("code",[s._v("M-1")]),s._v(" 时清零。")])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_2-2-verilog-示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-verilog-示例"}},[s._v("#")]),s._v(" "),t("strong",[s._v("2.2 Verilog 示例")])]),s._v(" "),t("div",{staticClass:"language-verilog line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-verilog"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v(" counter_modM #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("parameter")]),s._v(" M "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 模值")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("input")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("wire")]),s._v(" clk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("input")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("wire")]),s._v(" rst_n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 低有效复位")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("output")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("reg")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token kernel-function property"}},[s._v("$clog2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("M"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" count\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("always @")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("posedge")]),s._v(" clk "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("or")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("negedge")]),s._v(" rst_n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("rst_n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" M"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 计满清零")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n            count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 正常计数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("endmodule")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"_3-小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-小结"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3. 小结")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("二进制计数器")]),s._v("：简单，直接用触发器翻转输出，常作分频器。")]),s._v(" "),t("li",[t("strong",[s._v("模 M 计数器")]),s._v("：设计前先算出需要的触发器数量，然后用"),t("strong",[s._v("反馈清零法")]),s._v("限制计数范围。")]),s._v(" "),t("li",[s._v("在工程中，计数器是时序控制的基础，比如分频、延时、状态机定时等都会用到。")])]),s._v(" "),t("blockquote",[t("p",[s._v("如果说时钟是数字电路的“心跳”，那计数器就是“心跳的节拍器”。")])])])}),[],!1,null,null,null);t.default=r.exports}}]);