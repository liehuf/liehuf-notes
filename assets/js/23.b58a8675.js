(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{397:function(s,t,a){"use strict";a.r(t);var n=a(2),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("本博客用于对 "),t("strong",[s._v("PLL（Phase Locked Loop，锁相环）")]),s._v(" 进行基础认识，"),t("br"),s._v("\n内容仅包括："),t("strong",[s._v("PLL 是什么 + PLL 的基本工作原理示意")]),s._v("。")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"一、pll-的基本认识"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、pll-的基本认识"}},[s._v("#")]),s._v(" 一、PLL 的基本认识")]),s._v(" "),t("p",[s._v("PLL（锁相环）是一种"),t("strong",[s._v("基于反馈控制的时钟系统")]),s._v("。")]),s._v(" "),t("p",[s._v("其核心思想是：")]),s._v(" "),t("blockquote",[t("p",[s._v("通过比较“输入参考信号”和“内部产生信号”的相位差，"),t("br"),s._v("\n不断调整内部振荡器的频率，"),t("br"),s._v("\n直到二者在频率上相同、相位保持固定差值。")])]),s._v(" "),t("p",[s._v("当系统进入稳定状态时：")]),s._v(" "),t("ul",[t("li",[s._v("输出信号能够"),t("strong",[s._v("跟踪输入信号")])]),s._v(" "),t("li",[s._v("输入与输出之间的相位关系保持稳定")]),s._v(" "),t("li",[s._v("系统称该状态为 "),t("strong",[s._v("锁定（Locked）")])])]),s._v(" "),t("p",[s._v("在 FPGA 中，PLL 常用于对外部输入时钟进行：")]),s._v(" "),t("ul",[t("li",[s._v("倍频 / 分频")]),s._v(" "),t("li",[s._v("相位调整")]),s._v(" "),t("li",[s._v("输出稳定的系统时钟")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"二、pll-的基本工作原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、pll-的基本工作原理"}},[s._v("#")]),s._v(" 二、PLL 的基本工作原理")]),s._v(" "),t("p",[s._v("从原理结构上看，PLL 通常由三部分组成：")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("相位比较器（Phase Detector）")]),t("br"),s._v("\n比较参考信号与反馈信号的相位差")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("环路滤波器（Loop Filter）")]),t("br"),s._v("\n对相位误差信号进行平滑，避免剧烈抖动")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("压控振荡器（VCO）")]),t("br"),s._v("\n根据控制信号调整输出频率")])])]),s._v(" "),t("p",[s._v("输出信号再经过分频后反馈到输入端，"),t("br"),s._v("\n形成一个"),t("strong",[s._v("闭环反馈系统")]),s._v("。")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"三、用于理解-pll-原理的示意代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、用于理解-pll-原理的示意代码"}},[s._v("#")]),s._v(" 三、用于理解 PLL 原理的示意代码")]),s._v(" "),t("p",[s._v("需要强调的是：")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("以下代码仅用于理解 PLL 的反馈调节思想，"),t("br"),s._v("\n并不是真实可用的 PLL 实现。")])])]),s._v(" "),t("p",[s._v("真实 FPGA 中的 PLL 必须通过厂商 IP 核实现。")]),s._v(" "),t("div",{staticClass:"language-verilog line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-verilog"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v(" pll_model "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("input")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("wire")]),s._v(" ref_clk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 参考时钟")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("input")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("wire")]),s._v(" rst"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("output")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("reg")]),s._v("  vco_clk     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 模拟振荡器输出")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("reg")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" phase_error"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 相位误差（示意）")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("reg")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" control"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 控制量（示意）")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 相位比较（示意）")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("always @")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("posedge")]),s._v(" ref_clk "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("or")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("posedge")]),s._v(" rst"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rst"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            phase_error "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n            phase_error "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" phase_error "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 假想存在相位差")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 环路调节（示意）")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("always @")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("posedge")]),s._v(" ref_clk "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("or")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("posedge")]),s._v(" rst"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rst"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            control "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8'd100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n            control "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" control "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" phase_error"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 振荡器模型（示意）")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("always")]),s._v(" #"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("control"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n        vco_clk "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v("vco_clk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("endmodule")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("p",[s._v("该示意模型体现的思想是：")]),s._v(" "),t("ul",[t("li",[s._v("输出信号会被反馈并参与比较")]),s._v(" "),t("li",[s._v("比较结果影响振荡器行为")]),s._v(" "),t("li",[s._v("系统目标是让输出逐步“贴近”输入")])])])}),[],!1,null,null,null);t.default=r.exports}}]);