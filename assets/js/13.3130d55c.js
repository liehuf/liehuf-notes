(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{370:function(t,s,a){"use strict";a.r(s);var n=a(16),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"k230-rtc-时间都去哪了"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#k230-rtc-时间都去哪了"}},[t._v("#")]),t._v(" K230 RTC-时间都去哪了")]),t._v(" "),s("p",[s("em",[t._v("RTC时钟原理图")])]),t._v(" "),s("h2",{attrs:{id:"_1-rtc基础"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-rtc基础"}},[t._v("#")]),t._v(" 1. RTC基础")]),t._v(" "),s("h3",{attrs:{id:"_1-1-什么是rtc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-什么是rtc"}},[t._v("#")]),t._v(" 1.1 什么是RTC？")]),t._v(" "),s("p",[t._v("RTC（Real-Time Clock）是一种能够提供持续、精确的日期和时间信息的硬件或外设模块。在K230开发板中，RTC模块具有以下特点：")]),t._v(" "),s("ul",[s("li",[t._v("可独立计时")]),t._v(" "),s("li",[t._v("支持年月日时分秒")]),t._v(" "),s("li",[t._v("掉电后时间会丢失（无备用电池）")]),t._v(" "),s("li",[t._v("精度相对较低")])]),t._v(" "),s("h3",{attrs:{id:"_1-2-rtc工作原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-rtc工作原理"}},[t._v("#")]),t._v(" 1.2 RTC工作原理")]),t._v(" "),s("p",[t._v("RTC模块的主要特点：")]),t._v(" "),s("ul",[s("li",[t._v("使用内部计数器记录时间")]),t._v(" "),s("li",[t._v("通过晶振提供时钟源")]),t._v(" "),s("li",[t._v("支持时间设置和读取")]),t._v(" "),s("li",[t._v("可配置闹钟功能")])]),t._v(" "),s("h3",{attrs:{id:"_1-3-k230-rtc特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-k230-rtc特性"}},[t._v("#")]),t._v(" 1.3 K230 RTC特性")]),t._v(" "),s("p",[t._v("K230的RTC模块提供以下功能：")]),t._v(" "),s("ul",[s("li",[t._v("时间设置和读取")]),t._v(" "),s("li",[t._v("日期设置和读取")]),t._v(" "),s("li",[t._v("闹钟功能")]),t._v(" "),s("li",[t._v("定时唤醒")])]),t._v(" "),s("h2",{attrs:{id:"_2-rtc配置详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-rtc配置详解"}},[t._v("#")]),t._v(" 2. RTC配置详解")]),t._v(" "),s("h3",{attrs:{id:"_2-1-基本配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-基本配置"}},[t._v("#")]),t._v(" 2.1 基本配置")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" machine "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" RTC\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建RTC对象")]),t._v("\nrtc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" RTC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置时间")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 参数格式：(年, 月, 日, 星期, 时, 分, 秒, 微秒)")]),t._v("\nrtc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取当前时间")]),t._v("\ncurrent_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rtc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"当前时间："')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" current_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("h3",{attrs:{id:"_2-2-时间格式说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-时间格式说明"}},[t._v("#")]),t._v(" 2.2 时间格式说明")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 时间元组格式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("year"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" month"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" day"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" weekday"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hour"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" minute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" second"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" microsecond"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 星期对应关系")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0: 星期一")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1: 星期二")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2: 星期三")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3: 星期四")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4: 星期五")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 5: 星期六")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 6: 星期日")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h3",{attrs:{id:"_2-3-时间操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-时间操作"}},[t._v("#")]),t._v(" 2.3 时间操作")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("format_time")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datetime_tuple"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""格式化时间显示"""')]),t._v("\n    year"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" month"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" day"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" weekday"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hour"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" minute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" second"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datetime_tuple\n    weekdays "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"星期一"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"星期二"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"星期三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"星期四"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"星期五"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"星期六"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"星期日"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("year"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("年")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("month"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("月")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("day"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("日 ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("weekdays"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("weekday"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("hour"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token format-spec"}},[t._v("02d")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("minute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token format-spec"}},[t._v("02d")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("second"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token format-spec"}},[t._v("02d")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用示例")]),t._v("\ncurrent_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rtc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nformatted_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" format_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("formatted_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h2",{attrs:{id:"_3-实际应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-实际应用场景"}},[t._v("#")]),t._v(" 3. 实际应用场景")]),t._v(" "),s("h3",{attrs:{id:"_3-1-定时任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-定时任务"}},[t._v("#")]),t._v(" 3.1 定时任务")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("check_time")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target_hour"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" target_minute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""检查是否到达指定时间"""')]),t._v("\n    current_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rtc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    current_hour "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" current_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    current_minute "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" current_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" current_hour "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" target_hour "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" current_minute "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" target_minute\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用示例")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" check_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检查是否到达17:08")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"时间到！执行任务..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("h3",{attrs:{id:"_3-2-数据记录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-数据记录"}},[t._v("#")]),t._v(" 3.2 数据记录")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log_data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""记录数据并添加时间戳"""')]),t._v("\n    current_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rtc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    timestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" format_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    log_entry "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"[')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("] ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\\n"')])]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 写入日志文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data.log"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("write"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("log_entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h3",{attrs:{id:"_3-3-定时唤醒"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-定时唤醒"}},[t._v("#")]),t._v(" 3.3 定时唤醒")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_alarm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hour"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" minute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""设置闹钟"""')]),t._v("\n    current_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rtc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    current_hour "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" current_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    current_minute "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" current_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 计算距离目标时间的分钟数")]),t._v("\n    current_minutes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" current_hour "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" current_minute\n    target_minutes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hour "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" minute\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" target_minutes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" current_minutes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        target_minutes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果目标时间已过，设置为明天")]),t._v("\n        \n    minutes_to_wait "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" target_minutes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" current_minutes\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" minutes_to_wait\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("h2",{attrs:{id:"_4-性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-性能优化"}},[t._v("#")]),t._v(" 4. 性能优化")]),t._v(" "),s("h3",{attrs:{id:"_4-1-时间同步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-时间同步"}},[t._v("#")]),t._v(" 4.1 时间同步")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sync_time")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""通过网络同步时间"""')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ntptime\n        ntptime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("host "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pool.ntp.org"')]),t._v("\n        ntptime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h3",{attrs:{id:"_4-2-时间校准"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-时间校准"}},[t._v("#")]),t._v(" 4.2 时间校准")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calibrate_time")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""校准时间"""')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取网络时间")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" sync_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新RTC时间")]),t._v("\n        current_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("localtime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        rtc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h2",{attrs:{id:"_5-常见问题与解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-常见问题与解决方案"}},[t._v("#")]),t._v(" 5. 常见问题与解决方案")]),t._v(" "),s("h3",{attrs:{id:"_5-1-时间不准确"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-时间不准确"}},[t._v("#")]),t._v(" 5.1 时间不准确")]),t._v(" "),s("ul",[s("li",[t._v("原因：晶振精度限制")]),t._v(" "),s("li",[t._v("解决方案：\n"),s("ul",[s("li",[t._v("定期同步网络时间")]),t._v(" "),s("li",[t._v("使用外部高精度时钟模块")])])])]),t._v(" "),s("h3",{attrs:{id:"_5-2-掉电时间丢失"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-掉电时间丢失"}},[t._v("#")]),t._v(" 5.2 掉电时间丢失")]),t._v(" "),s("ul",[s("li",[t._v("原因：无备用电池")]),t._v(" "),s("li",[t._v("解决方案：\n"),s("ul",[s("li",[t._v("使用外部RTC模块（如SD3078）")]),t._v(" "),s("li",[t._v("实现掉电检测和保存时间")])])])]),t._v(" "),s("h3",{attrs:{id:"_5-3-时间同步失败"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-时间同步失败"}},[t._v("#")]),t._v(" 5.3 时间同步失败")]),t._v(" "),s("ul",[s("li",[t._v("原因：网络问题或NTP服务器不可用")]),t._v(" "),s("li",[t._v("解决方案：\n"),s("ul",[s("li",[t._v("使用多个NTP服务器")]),t._v(" "),s("li",[t._v("实现本地时间备份")])])])]),t._v(" "),s("h2",{attrs:{id:"_6-最佳实践"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-最佳实践"}},[t._v("#")]),t._v(" 6. 最佳实践")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("时间管理")]),t._v(" "),s("ul",[s("li",[t._v("定期同步网络时间")]),t._v(" "),s("li",[t._v("实现时间备份机制")]),t._v(" "),s("li",[t._v("使用高精度时钟源")])])]),t._v(" "),s("li",[s("p",[t._v("应用开发")]),t._v(" "),s("ul",[s("li",[t._v("考虑时区问题")]),t._v(" "),s("li",[t._v("实现时间格式化")]),t._v(" "),s("li",[t._v("添加时间验证")])])]),t._v(" "),s("li",[s("p",[t._v("系统集成")]),t._v(" "),s("ul",[s("li",[t._v("与网络模块配合")]),t._v(" "),s("li",[t._v("实现数据记录")]),t._v(" "),s("li",[t._v("支持定时任务")])])])]),t._v(" "),s("h2",{attrs:{id:"_7-注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-注意事项"}},[t._v("#")]),t._v(" 7. 注意事项")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("时间精度")]),t._v(" "),s("ul",[s("li",[t._v("K230内置RTC精度较低")]),t._v(" "),s("li",[t._v("建议使用外部高精度时钟模块")]),t._v(" "),s("li",[t._v("定期校准时间")])])]),t._v(" "),s("li",[s("p",[t._v("电源管理")]),t._v(" "),s("ul",[s("li",[t._v("掉电后时间会丢失")]),t._v(" "),s("li",[t._v("需要实现时间保存机制")]),t._v(" "),s("li",[t._v("考虑使用备用电池")])])]),t._v(" "),s("li",[s("p",[t._v("应用开发")]),t._v(" "),s("ul",[s("li",[t._v("考虑时间同步问题")]),t._v(" "),s("li",[t._v("实现错误处理机制")]),t._v(" "),s("li",[t._v("注意时区转换")])])])]),t._v(" "),s("h2",{attrs:{id:"_8-参考文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-参考文档"}},[t._v("#")]),t._v(" 8. 参考文档")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://wiki.lckfb.com/zh-hans/lushan-pi-k230/basic/rtc.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("K230 RTC模块使用说明"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);