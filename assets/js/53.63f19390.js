(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{417:function(s,a,e){"use strict";e.r(a);var t=e(0),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"shell脚本的变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell脚本的变量"}},[s._v("#")]),s._v(" Shell脚本的变量")]),s._v(" "),a("h3",{attrs:{id:"变量的定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量的定义"}},[s._v("#")]),s._v(" 变量的定义")]),s._v(" "),a("p",[a("strong",[s._v("变量")]),s._v("就是“在脚本运行周期内值可以变化的名字”，用来保存字符串或数字，脚本里通过名字去引用它的值。")]),s._v(" "),a("h3",{attrs:{id:"命名规则-必须牢牢记住"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命名规则-必须牢牢记住"}},[s._v("#")]),s._v(" 命名规则（必须牢牢记住）")]),s._v(" "),a("ul",[a("li",[s._v("只能用：英文字母（A–Z、a–z）、数字（0–9）、下划线（"),a("code",[s._v("_")]),s._v("）。")]),s._v(" "),a("li",[a("strong",[s._v("首字符不能是数字")]),s._v("（比如 "),a("code",[s._v("2name=...")]),s._v(" 会报错）。")]),s._v(" "),a("li",[a("strong",[s._v("等号两边不能有空格")]),s._v("（"),a("code",[s._v("name = 1")]),s._v(" 会报错，正确写 "),a("code",[s._v("name=1")]),s._v("）。")]),s._v(" "),a("li",[s._v("如果值里有空格，要用引号包起来："),a("code",[s._v('msg="hello world"')]),s._v("。")]),s._v(" "),a("li",[s._v("变量名建议用大写来表示环境变量（约定俗成），小写通常是脚本内部变量。")])]),s._v(" "),a("p",[a("strong",[s._v("示例")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ikun"')]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 正确")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("2name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xiaoheizi"')]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  错误：不能以数字开头")]),s._v("\nname "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kun"')]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  错误：等号两边不能有空格")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"引号-单引号-vs-双引号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引号-单引号-vs-双引号"}},[s._v("#")]),s._v(" 引号：单引号 vs 双引号")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("单引号 "),a("code",[s._v("'...'")])]),s._v("：原样输出，不做变量替换或命令替换。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ikun\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$name'")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出 $name")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("双引号 "),a("code",[s._v('"..."')])]),s._v("：会进行变量替换和命令替换（但保留空格），且支持转义 "),a("code",[s._v("\\")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v('"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出 ikun")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("推荐：当字符串里有变量或命令替换时用双引号；要输出"),a("strong",[s._v("字面量")]),s._v("时用单引号。")])])]),s._v(" "),a("h3",{attrs:{id:"常用-特殊符号-与它们的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用-特殊符号-与它们的作用"}},[s._v("#")]),s._v(" 常用“特殊符号”与它们的作用")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("command")]),s._v(" 或 "),a("code",[s._v("$(command)")]),s._v("："),a("strong",[s._v("命令替换")]),s._v("，会先执行括号/反引号内的命令，再把结果作为文本返回。推荐用 "),a("code",[s._v("$(...)")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("now")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$now")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("{}")]),s._v("：变量扩展 / 分组。例如 "),a("code",[s._v("${var}")]),s._v(" 可避免歧义，或者用于子串替换/截取。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${name}")]),s._v("哥\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("()")]),s._v("：在 "),a("strong",[s._v("子 Shell")]),s._v(" 中执行命令（子 Shell 的变量改动不会影响父 Shell）。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("[]")]),s._v("：常用于 "),a("code",[s._v("test")]),s._v(" 或 "),a("code",[s._v("[ ... ]")]),s._v(" 条件判断。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("\\")]),s._v("：转义字符，把后面的字符当作普通字符处理。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("#")]),s._v("：注释行的开头（"),a("code",[s._v("#")]),s._v(" 后面的内容不执行）。")])])]),s._v(" "),a("h3",{attrs:{id:"变量定义与调用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量定义与调用"}},[s._v("#")]),s._v(" 变量定义与调用")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("定义（赋值）")]),s._v("（注意：无空格）：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("msg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello world"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("调用")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$foo")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${msg}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("推荐写法")]),s._v("：使用 "),a("code",[s._v("${var}")]),s._v(" 在字符串拼接时不容易产生歧义：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/'),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${path}")]),s._v('/file.txt"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"追加-拼接变量值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#追加-拼接变量值"}},[s._v("#")]),s._v(" 追加/拼接变量值")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("s")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("s")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${s}")]),s._v('456"')]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 结果: 123456")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 或者 s="$s"456  但最好用 ${s} 方式更安全')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"删除变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除变量"}},[s._v("#")]),s._v(" 删除变量")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("用 "),a("code",[s._v("unset")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("unset")]),s._v(" foo\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$foo")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 无输出")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("unset")]),s._v(" 既可以删除普通变量，也可以删除环境变量（不过若变量通过 "),a("code",[s._v("readonly")]),s._v(" 定义或导出到某种保护环境，有例外）。")])])]),s._v(" "),a("h3",{attrs:{id:"环境变量-export"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境变量-export"}},[s._v("#")]),s._v(" 环境变量（export）")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("普通变量")]),s._v("只在当前 shell/脚本有效；"),a("strong",[s._v("环境变量")]),s._v("使用 "),a("code",[s._v("export")]),s._v(" 导出后会传给子进程（如脚本或命令）。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AGE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" AGE       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 现在 AGE 是环境变量")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("删除环境变量："),a("code",[s._v("unset VAR")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("查看：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("env")]),s._v("：只显示"),a("strong",[s._v("环境变量")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("set")]),s._v("：显示 "),a("strong",[s._v("所有变量（包括 shell 函数、普通变量、环境变量）")])])])])]),s._v(" "),a("p",[a("strong",[s._v("注意")]),s._v("：把变量写入 "),a("code",[s._v("~/.bashrc")]),s._v("、"),a("code",[s._v("~/.profile")]),s._v(" 或 "),a("code",[s._v("/etc/profile")]),s._v(" 才能在新的登录/会话中持久化（博文提到系统默认环境变量通常在 "),a("code",[s._v("/etc/profile")]),s._v(" 等处定义）。")]),s._v(" "),a("h3",{attrs:{id:"位置参数-脚本传参-实用且常用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#位置参数-脚本传参-实用且常用"}},[s._v("#")]),s._v(" 位置参数（脚本传参）——实用且常用")]),s._v(" "),a("p",[s._v("当脚本以参数形式运行时，可以在脚本里通过 "),a("code",[s._v("$1")]),s._v("、"),a("code",[s._v("$2")]),s._v("... 访问：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("$0")]),s._v("：脚本名（或执行命令名）。")]),s._v(" "),a("li",[a("code",[s._v("$1")]),s._v(" 到 "),a("code",[s._v("$9")]),s._v("：第 1 到第 9 个参数（超过 9 个要用大括号，例如 "),a("code",[s._v("${10}")]),s._v("）。")]),s._v(" "),a("li",[a("code",[s._v("$*")]),s._v("：把命令行所有参数当作 "),a("strong",[s._v("一个整体")]),s._v("（整体展开为单个字符串）。")]),s._v(" "),a("li",[a("code",[s._v("$@")]),s._v("：把所有参数 "),a("strong",[s._v("分别对待")]),s._v("（在 "),a("code",[s._v("for")]),s._v(" 循环中通常比 "),a("code",[s._v("$*")]),s._v(" 更合用）。")]),s._v(" "),a("li",[a("code",[s._v("$#")]),s._v("：参数个数。")])]),s._v(" "),a("p",[a("strong",[s._v("示例脚本")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"脚本名: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"第1个参数: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"参数个数: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v('"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $@ vs $* 示例")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$v")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("说明："),a("code",[s._v("$*")]),s._v(" 会把所有参数看成一个整体 → "),a("code",[s._v("for")]),s._v(" 循环只会执行一次；"),a("code",[s._v("$@")]),s._v(" 会把每个参数单独分开 → "),a("code",[s._v("for")]),s._v(" 会按参数个数循环多次。博文提供了示例。")]),s._v(" "),a("h3",{attrs:{id:"预定义变量-内建特殊变量-最常用的几个"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#预定义变量-内建特殊变量-最常用的几个"}},[s._v("#")]),s._v(" 预定义变量（内建特殊变量）——最常用的几个")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("$?")]),s._v("："),a("strong",[s._v("上一条命令的返回值")]),s._v("（0 表示成功；非 0 表示失败，具体值视命令而定）。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /not_exist\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 非0，说明失败")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("$$")]),s._v("：当前脚本/进程的 PID。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$$")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 比如输出 12345")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("$!")]),s._v("：最近一个"),a("strong",[s._v("后台运行")]),s._v("命令的 PID（当你在命令后面加 "),a("code",[s._v("&")]),s._v(" 时）。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$!")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sleep 命令的 PID")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"只读变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#只读变量"}},[s._v("#")]),s._v(" 只读变量")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("用 "),a("code",[s._v("readonly 变量名")]),s._v(" 将变量设为只读，之后修改会报错（适合常量）。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("readonly")]),s._v(" a\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会报错: readonly variable")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$a")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 还是 10")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"从键盘接受输入并存变量-read"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从键盘接受输入并存变量-read"}},[s._v("#")]),s._v(" 从键盘接受输入并存变量（"),a("code",[s._v("read")]),s._v("）")]),s._v(" "),a("p",[a("code",[s._v("read")]),s._v(" 可以把用户输入保存到变量：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"请输入名字: "')]),s._v(" name\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"你好, '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v('"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("常用选项：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("-p")]),s._v("：显示提示信息")]),s._v(" "),a("li",[a("code",[s._v("-t")]),s._v("：超时时间（秒）")]),s._v(" "),a("li",[a("code",[s._v("-n N")]),s._v("：只读 N 个字符")]),s._v(" "),a("li",[a("code",[s._v("-s")]),s._v("：隐藏输入（用于密码）\n如果不指定变量名，输入会保存在默认变量 "),a("code",[s._v("REPLY")]),s._v(" 中。"),a("a",{attrs:{href:"https://blog.csdn.net/w918589859/article/details/108752592",target:"_blank",rel:"noopener noreferrer"}},[s._v("CSDN Blog"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"常见坑-好习惯-实战中会卡的点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见坑-好习惯-实战中会卡的点"}},[s._v("#")]),s._v(" 常见坑 & 好习惯（实战中会卡的点）")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("等号两边不能有空格")]),s._v("（最常见的错误）。")]),s._v(" "),a("li",[a("strong",[s._v("字符串拼接时最好用 "),a("code",[s._v("${var}")])]),s._v("，避免 "),a("code",[s._v('"${a}b"')]),s._v(" 被误读为 "),a("code",[s._v("$ab")]),s._v("。")]),s._v(" "),a("li",[a("strong",[s._v("用双引号包变量")]),s._v("："),a("code",[s._v('"$var"')]),s._v(" 比 "),a("code",[s._v("$var")]),s._v(" 更安全（防止单词拆分和通配符扩展）。\n"),a("ul",[a("li",[s._v("错误示例："),a("code",[s._v("for f in $files; do")]),s._v(" 会把带空格的文件名拆开；改成 "),a("code",[s._v('for f in "$files"; do')]),s._v(" 或更好用数组。")])])]),s._v(" "),a("li",[a("strong",[s._v("记得 "),a("code",[s._v("export")]),s._v(" 才会把变量传给子进程")]),s._v("。")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("$@")]),s._v(" 在循环时用双引号")]),s._v("："),a("code",[s._v('for x in "$@"; do ...')]),s._v("（处理带空格的参数正确）。")]),s._v(" "),a("li",[a("strong",[s._v("用 "),a("code",[s._v("set")]),s._v(" 与 "),a("code",[s._v("env")]),s._v(" 分别查看变量")]),s._v("："),a("code",[s._v("set")]),s._v(" 显示所有，"),a("code",[s._v("env")]),s._v(" 显示环境变量。"),a("a",{attrs:{href:"https://blog.csdn.net/w918589859/article/details/108752592",target:"_blank",rel:"noopener noreferrer"}},[s._v("CSDN Blog+1"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"快速实操练习-做三个小脚本-5-分钟上手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速实操练习-做三个小脚本-5-分钟上手"}},[s._v("#")]),s._v(" 快速实操练习（做三个小脚本：5 分钟上手）")]),s._v(" "),a("p",[s._v("把下面三个小脚本贴到你的板子或终端试试，能快速巩固概念。")]),s._v(" "),a("p",[s._v("A) 传参脚本 "),a("code",[s._v("args.sh")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"脚本名: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"参数个数: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"所有参数（分别）:"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"  -> '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$p")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("B) 环境变量示例 "),a("code",[s._v("env_example.sh")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYVAR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" MYVAR\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo child sees MYVAR=$MYVAR'")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 子shell 能看到 MYVAR")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("C) 读输入并只读变量 "),a("code",[s._v("read_and_readonly.sh")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"输入常量名: "')]),s._v(" n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("readonly")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$n")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"已设 '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$n")]),s._v(' 为只读（试着重新赋值看会报错）"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"速查备忘-cheat-sheet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#速查备忘-cheat-sheet"}},[s._v("#")]),s._v(" 速查备忘（Cheat-sheet）")]),s._v(" "),a("ul",[a("li",[s._v("定义："),a("code",[s._v("var=value")])]),s._v(" "),a("li",[s._v("调用："),a("code",[s._v("$var")]),s._v(" 或 "),a("code",[s._v("${var}")])]),s._v(" "),a("li",[s._v("导出（环境变量）："),a("code",[s._v("export VAR=value")])]),s._v(" "),a("li",[s._v("删除："),a("code",[s._v("unset VAR")])]),s._v(" "),a("li",[s._v("只读："),a("code",[s._v("readonly VAR")])]),s._v(" "),a("li",[s._v("参数："),a("code",[s._v("$0")]),s._v(" "),a("code",[s._v("$1")]),s._v(" ... "),a("code",[s._v("$#")]),s._v(" "),a("code",[s._v("$@")]),s._v(" "),a("code",[s._v("$*")])]),s._v(" "),a("li",[s._v("状态码："),a("code",[s._v("$?")]),s._v("，当前PID："),a("code",[s._v("$$")]),s._v("，后台最后进程："),a("code",[s._v("$!")])]),s._v(" "),a("li",[s._v("命令替换："),a("code",[s._v("$(command)")]),s._v("（推荐）或 "),a("code",[s._v("command")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);