(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{400:function(s,t,e){"use strict";e.r(t);var a=e(2),n=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"linux进程与资源管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux进程与资源管理"}},[s._v("#")]),s._v(" Linux进程与资源管理")]),s._v(" "),t("h2",{attrs:{id:"一、进程观察"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、进程观察"}},[s._v("#")]),s._v(" 一、进程观察")]),s._v(" "),t("p",[s._v("PID 是什么")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("PID = Process ID，进程号")])]),s._v(" "),t("li",[s._v("内核给每个运行中的程序分配的"),t("strong",[s._v("唯一身份证号")])]),s._v(" "),t("li",[s._v("所有操作进程的命令（kill、top、strace 等）都靠 PID 定位")])]),s._v(" "),t("p",[s._v("CPU% 怎么来的？")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("单位时间内，进程占用 CPU 的时间比例")])])]),s._v(" "),t("ul",[t("li",[s._v("比如 100% 就是单核跑满")]),s._v(" "),t("li",[s._v("多核机器可以超过 100%（比如 250% 就是占了 2.5 核）")]),s._v(" "),t("li",[s._v("是"),t("strong",[s._v("动态计算")]),s._v("出来的，不是固定值")])]),s._v(" "),t("p",[s._v("VIRT vs RES")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("VIRT（虚拟内存）")])]),s._v(" "),t("p",[s._v("进程"),t("strong",[s._v("声称要用")]),s._v("的所有内存总和")]),s._v(" "),t("p",[s._v("= 物理内存 + 交换分区 + 共享库 + 未分配但申请过的空间")]),s._v(" "),t("p",[s._v("→ "),t("strong",[s._v("虚的，参考意义不大")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("RES（常驻内存）")])]),s._v(" "),t("p",[s._v("进程"),t("strong",[s._v("真正正在占用的物理内存")])]),s._v(" "),t("p",[s._v("→ "),t("strong",[s._v("看这个才准")])])])]),s._v(" "),t("p",[s._v("在命令行中输入："),t("code",[s._v("ps aux")])]),s._v(" "),t("p",[s._v("会显示如下内容：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("166580")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11544")]),s._v(" ?        Ss   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":56   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":02 /sbin/init au\nroot           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" ?        S    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":56   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kthreadd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("这一大堆输出中，意义如下：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("列名")]),s._v(" "),t("th",[s._v("含义")]),s._v(" "),t("th",[s._v("举例")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("USER")]),s._v(" "),t("td",[s._v("进程所属用户")]),s._v(" "),t("td",[s._v("root / 你的用户名")])]),s._v(" "),t("tr",[t("td",[s._v("PID")]),s._v(" "),t("td",[s._v("进程 ID（唯一标识）")]),s._v(" "),t("td",[s._v("1 / 1234 / 5678")])]),s._v(" "),t("tr",[t("td",[s._v("%CPU")]),s._v(" "),t("td",[s._v("CPU 占用百分比")]),s._v(" "),t("td",[s._v("0.0 / 1.5 / 10.2")])]),s._v(" "),t("tr",[t("td",[s._v("%MEM")]),s._v(" "),t("td",[s._v("内存占用百分比")]),s._v(" "),t("td",[s._v("0.1 / 2.3")])]),s._v(" "),t("tr",[t("td",[s._v("VSZ")]),s._v(" "),t("td",[s._v("虚拟内存（VIRT），单位 KB")]),s._v(" "),t("td",[s._v("123456")])]),s._v(" "),t("tr",[t("td",[s._v("RSS")]),s._v(" "),t("td",[s._v("常驻内存（RES），单位 KB")]),s._v(" "),t("td",[s._v("67890")])]),s._v(" "),t("tr",[t("td",[s._v("COMMAND")]),s._v(" "),t("td",[s._v("进程对应的命令")]),s._v(" "),t("td",[s._v("sleep 1000 / bash / systemd")])])])]),s._v(" "),t("p",[s._v("解读重要内容：")]),s._v(" "),t("p",[t("strong",[s._v("PID")]),s._v("： "),t("code",[s._v("PID=1")]),s._v(" 的进程是 "),t("code",[s._v("systemd")]),s._v("，这是 Linux 的第一个进程（所有进程的爹）；")]),s._v(" "),t("p",[t("strong",[s._v("%CPU")]),s._v("：比如有个进程 % CPU=50.0，说明它占了当前单核的 50% 算力（如果是 4 核机器，最大能到 400%）；")]),s._v(" "),t("p",[t("strong",[s._v("VIRT vs RES")]),s._v("：比如某进程 VIRT=200000KB，RES=50000KB → 真正占物理内存的是 50000KB，VIRT 是 “宣称要用的总内存”（包含没实际使用的）。")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("如果要实时监控进程，则需要使用"),t("code",[s._v("top")]),s._v("命令：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用后，自动定时刷新当前进程，可以使用快捷键"),t("code",[s._v("q")]),s._v("退出，也可以")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按 M 键 - 按内存排序")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按 u 后输入用户名 - 查看特定用户进程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按 k 后输入 PID - 终止进程")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"二、进程状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、进程状态"}},[s._v("#")]),s._v(" 二、进程状态")]),s._v(" "),t("p",[s._v("在运行"),t("code",[s._v("top")]),s._v("命令后，在其S(state)列中，可能会出现如下的字符")]),s._v(" "),t("p",[t("strong",[s._v("R = Running")])]),s._v(" "),t("p",[s._v("正在运行或在就绪队列排队")]),s._v(" "),t("p",[t("strong",[s._v("S = Sleeping")])]),s._v(" "),t("p",[s._v("可中断睡眠（等 IO、等时间、等信号）")]),s._v(" "),t("p",[s._v("大部分进程平时都是 S")]),s._v(" "),t("p",[t("strong",[s._v("Z = Zombie 僵尸进程")])]),s._v(" "),t("p",[s._v("子进程死了，但父进程没 “收尸”（没调用 wait）")]),s._v(" "),t("p",[s._v("→ 只占 PID，不占资源，太多会炸")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"新建一个进程并管理它"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建一个进程并管理它"}},[s._v("#")]),s._v(" 新建一个进程并管理它")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sleep 100 &  # & 表示后台运行\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("终端会返回类似 "),t("code",[s._v("[1] 12345")]),s._v("（12345 是这个 sleep 的 PID）。")]),s._v(" "),t("p",[s._v("切回 top 界面，按 "),t("code",[s._v("P")]),s._v(" 排序，找到 PID=12345 的进程，看它的 "),t("code",[s._v("S")]),s._v(" 列 → 是 "),t("code",[s._v("S")]),s._v("（睡眠，因为 sleep 在等时间）。")]),s._v(" "),t("p",[s._v("示例：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ikun@ubuntu2004:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4134")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("返回的 "),t("strong",[s._v("4134")]),s._v("就是PID")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("jobs")]),s._v("命令会显示出当前后台运行的进程")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ikun@ubuntu2004:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("jobs")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  运行中               "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("可以分别使用"),t("code",[s._v("fg")]),s._v("和"),t("code",[s._v("bg")]),s._v("命令让进程在前台和后台运行，如")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ikun@ubuntu2004:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fg")]),s._v(" %1 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此处的1是指后台进程号，就是在创建进程时返回的数字")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n^Z\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过按下 ^Z 来停止前台进程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  已停止               "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nikun@ubuntu2004:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bg")]),s._v(" %1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"三、信号机制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、信号机制"}},[s._v("#")]),s._v(" 三、信号机制")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("信号 = 内核与进程之间的控制指令")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会返回一个PID，可在另一个终端里面退出这个进程")]),s._v("\n\t\t  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在其他进程中也可以通过“ps aux | grap sleep”命令来查看PID")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-15")]),s._v(" PID   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 温柔退出")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-9")]),s._v(" PID    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制杀死")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("重点理解")]),s._v("：")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("15 SIGTERM")]),s._v("：")]),s._v(" "),t("p",[s._v("告诉进程 “你可以退出了，请自己清理资源”")]),s._v(" "),t("p",[s._v("程序可以"),t("strong",[s._v("拒绝、处理、优雅退出")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("9 SIGKILL")]),s._v("：")]),s._v(" "),t("p",[t("strong",[s._v("内核直接干掉进程，不给程序反应时间")])]),s._v(" "),t("p",[s._v("无法被捕获、无法被忽略、"),t("strong",[s._v("必杀")])])])]),s._v(" "),t("h2",{attrs:{id:"四、systemd基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、systemd基础"}},[s._v("#")]),s._v(" 四、Systemd基础")]),s._v(" "),t("h3",{attrs:{id:"查看全部服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看全部服务"}},[s._v("#")]),s._v(" 查看全部服务")]),s._v(" "),t("p",[s._v("在终端中运行命令：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("systemctl list-units "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("显示如下：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ikun@ubuntu2004:~$ systemctl list-units "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service\n  UNIT                                                  LOAD   ACTIVE SUB     DESCRIPTION        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  accounts-daemon.service                               loaded active running Accounts Service\n  acpid.service                                         loaded active running ACPI event daemon\n  alsa-restore.service                                  loaded active exited  Save/Restore Sound "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  apparmor.service                                      loaded active exited  Load AppArmor profi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  apport.service                                        loaded active exited  LSB: automatic cras"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"核心概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[s._v("#")]),s._v(" 核心概念")]),s._v(" "),t("p",[t("strong",[s._v("Service（服务）")]),s._v("：systemd 定义的 “单元”，本质是配置文件（/etc/systemd/system/），描述如何启动 / 停止一个后台程序；")]),s._v(" "),t("p",[t("strong",[s._v("Daemon（守护进程）")]),s._v("：服务对应的后台进程（比如 ssh.service 对应的 sshd 进程），特点是脱离终端、后台持续运行、开机自启；")]),s._v(" "),t("p",[t("strong",[s._v("运行级别替代")]),s._v("：")]),s._v(" "),t("p",[s._v("老 Linux 的 0-6 运行级别（比如 3 是字符界面，5 是图形界面），在 systemd 里被"),t("strong",[s._v("Target")]),s._v("替代：")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("multi-user.target")]),s._v("：多用户字符界面（对应老级别 3）；")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("graphical.target")]),s._v("：图形界面（对应老级别 5）")]),s._v(" "),t("p",[s._v("查当前默认 Target："),t("code",[s._v("systemctl get-default")])])])]),s._v(" "),t("h3",{attrs:{id:"查看ssh服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看ssh服务"}},[s._v("#")]),s._v(" 查看"),t("code",[s._v("ssh")]),s._v("服务")]),s._v(" "),t("p",[s._v("运行命令："),t("code",[s._v("systemctl status ssh")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ikun@ubuntu2004:~$ systemctl status "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n● ssh.service - OpenBSD Secure Shell server\n     Loaded: loaded "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/lib/systemd/system/ssh.service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" vendor preset: enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n     Active: active "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("running"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" since Fri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2026")]),s._v("-02-20 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":23:24 CST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 45min ago\n       Docs: man:sshd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n             man:sshd_config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   Main PID: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3627")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sshd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      Tasks: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("limit: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2204")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n     Memory: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".7M\n        CPU: 13ms\n     CGroup: /system.slice/ssh.service\n             └─3627 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":23:24 ubuntu2004 systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Starting OpenBSD Secure Shell server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":23:24 ubuntu2004 sshd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3627")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Server listening on "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0 port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":23:24 ubuntu2004 sshd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3627")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Server listening on :: port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":23:24 ubuntu2004 systemd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Started OpenBSD Secure Shell server.\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("ul",[t("li",[t("p",[t("strong",[s._v("核心服务标识行")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("●")]),s._v("：systemd的状态图标，绿色实心圆代表服务正常运行中，如果是红色×代表服务启动失败，灰色○代表服务已停止")]),s._v(" "),t("li",[t("code",[s._v("ssh.service")]),s._v('：服务的完整单元名称，是systemd中服务的唯一标识符，日常操作时可以用"ssh"简写代替')]),s._v(" "),t("li",[t("code",[s._v("OpenBSD Secure Shell server")]),s._v("：服务的详细描述信息，说明这是OpenBSD团队开发的SSH远程登录服务")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Loaded（加载状态）")]),s._v("：这一行告诉你服务的配置文件是否被正确加载，是排查服务启动失败的第一步")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("loaded")]),s._v('：表示配置文件已经成功加载到内存中，如果是"not-found"则说明配置文件丢失')]),s._v(" "),t("li",[t("code",[s._v("/lib/systemd/system/ssh.service")]),s._v("：服务配置文件的完整存放路径，这是systemd服务的核心配置文件所在位置")]),s._v(" "),t("li",[t("code",[s._v("enabled")]),s._v('：表示服务已设置为开机自启动，如果是"disabled"则代表开机不会自动启动SSH服务')]),s._v(" "),t("li",[t("code",[s._v("vendor preset: enabled")]),s._v("：表示Ubuntu系统厂商默认将这个服务设置为开机自启")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Active（运行状态）")]),s._v("：这是最核心的状态行，直接告诉你服务当前是否在运行")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("active (running)")]),s._v('：服务处于"活跃(运行中)"状态，如果是"inactive (dead)"代表服务已停止，"failed"代表服务启动失败')]),s._v(" "),t("li",[t("code",[s._v("since Fri 2026-02-20 21:23:24 CST")]),s._v("：服务启动的具体时间点，精确到秒")]),s._v(" "),t("li",[t("code",[s._v("45min ago")]),s._v("：服务已经稳定运行了45分钟，说明这段时间内没有发生崩溃或重启")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Docs（文档参考）")]),s._v("：告诉你如果想深入了解SSH服务的详细信息，可以通过以下命令查看官方文档")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("man:sshd(8)")]),s._v('：在终端输入"man sshd"可以查看SSH守护进程的手册页')]),s._v(" "),t("li",[t("code",[s._v("man:sshd_config(5)")]),s._v('：在终端输入"man sshd_config"可以查看SSH配置文件的详细说明，排查配置问题时特别有用')])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("资源占用信息")]),s._v("：这些数值可以帮助判断服务是否存在资源异常")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("Main PID: 3627 (sshd)")]),s._v("：SSH服务的主进程ID是3627，虽然可以用kill命令控制，但不建议手动杀死系统服务")]),s._v(" "),t("li",[t("code",[s._v("Tasks: 1 (limit: 2204)")]),s._v("：该服务当前只占用1个任务(进程)，系统允许的最大进程数是2204个")]),s._v(" "),t("li",[t("code",[s._v("Memory: 1.7M")]),s._v("：服务只占用1.7MB物理内存，非常轻量级，如果显示几十GB则说明服务异常")]),s._v(" "),t("li",[t("code",[s._v("CPU: 13ms")]),s._v("：从启动到现在总共消耗了13毫秒的CPU时间，几乎可以忽略不计，如果显示几秒或几分钟则说明服务一直在占用CPU")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("CGroup（控制组）")]),s._v("：systemd用来限制和管理服务资源的机制")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("/system.slice/ssh.service")]),s._v("：控制组的路径，属于系统级服务(system.slice)")]),s._v(" "),t("li",[t("code",[s._v('└─3627 "sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups"')]),s._v("：主进程的具体运行命令，"),t("code",[s._v("-D")]),s._v("表示以守护进程模式运行，"),t("code",[s._v("[listener]")]),s._v("表示正在监听22端口的连接请求")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("日志部分")]),s._v("：这是排查问题的核心依据，记录了服务启动的全过程")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("2月 20 21:23:24 ubuntu2004 systemd[1]: Starting OpenBSD Secure Shell server...")]),s._v("：systemd开始启动SSH服务")]),s._v(" "),t("li",[t("code",[s._v("2月 20 21:23:24 ubuntu2004 sshd[3627]: Server listening on 0.0.0.0 port 22.")]),s._v("：SSH服务开始监听所有IPv4地址的22端口")]),s._v(" "),t("li",[t("code",[s._v("2月 20 21:23:24 ubuntu2004 sshd[3627]: Server listening on :: port 22.")]),s._v("：SSH服务开始监听所有IPv6地址的22端口")]),s._v(" "),t("li",[t("code",[s._v("2月 20 21:23:24 ubuntu2004 systemd[1]: Started OpenBSD Secure Shell server.")]),s._v("：systemd确认SSH服务启动成功")]),s._v(" "),t("li",[s._v('如果日志中出现"error"或"failed"关键词，比如"Port 22 already in use"，就能快速定位启动失败的原因')])])])]),s._v(" "),t("p",[s._v("额外实用命令")]),s._v(" "),t("ul",[t("li",[s._v("启动 ssh 服务："),t("code",[s._v("sudo systemctl start ssh")]),s._v("；")]),s._v(" "),t("li",[s._v("停止 ssh 服务："),t("code",[s._v("sudo systemctl stop ssh")]),s._v("；")]),s._v(" "),t("li",[s._v("设置开机自启："),t("code",[s._v("sudo systemctl enable ssh")]),s._v("；")]),s._v(" "),t("li",[s._v("重启服务："),t("code",[s._v("sudo systemctl restart ssh")]),s._v("。")])])])}),[],!1,null,null,null);t.default=n.exports}}]);